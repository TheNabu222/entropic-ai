<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;CoAIexist: Rashomon in Rogers Park&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&amp;display=swap" rel="stylesheet"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>body {</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-family: 'Press Start 2P', cursive;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #1a1a1a; /* Deep Charcoal - "dark starry sky" base */</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #1a1a1a;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 0;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 100vh;</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: flex; /* For overall layout */</p>
<p class="p1"><span class="Apple-converted-space">      </span>flex-direction: column; /* Stack root content and taskbar */</p>
<p class="p1"><span class="Apple-converted-space">      </span>overflow: hidden; /* Prevent body scrollbars */</p>
<p class="p1"><span class="Apple-converted-space">      </span>position: relative;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>body::after { /* Scanlines */</p>
<p class="p1"><span class="Apple-converted-space">      </span>content: "";</p>
<p class="p1"><span class="Apple-converted-space">      </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">      </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>pointer-events: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: linear-gradient(</p>
<p class="p1"><span class="Apple-converted-space">        </span>to bottom,</p>
<p class="p1"><span class="Apple-converted-space">        </span>rgba(20, 20, 20, 0) 0%,</p>
<p class="p1"><span class="Apple-converted-space">        </span>rgba(20, 20, 20, 0) 97%,</p>
<p class="p1"><span class="Apple-converted-space">        </span>rgba(255, 255, 255, 0.02) 98%,<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>rgba(0, 0, 0, 0.05) 100%<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>);</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-size: 100% 3px;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>animation: scanlines 15s linear infinite;</p>
<p class="p1"><span class="Apple-converted-space">      </span>z-index: 0; /* Behind actual content but above desktop-bg if needed */</p>
<p class="p1"><span class="Apple-converted-space">      </span>opacity: 0.4;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>@keyframes scanlines {</p>
<p class="p1"><span class="Apple-converted-space">      </span>0% { background-position: 0 0; }</p>
<p class="p1"><span class="Apple-converted-space">      </span>100% { background-position: 0 300px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>#desktop-bg-container { /* Stars background */</p>
<p class="p1"><span class="Apple-converted-space">      </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">      </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>pointer-events: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>z-index: -1; /* Ensure it's behind everything */</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.desktop-star {</p>
<p class="p1"><span class="Apple-converted-space">      </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 2px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 2px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-radius: 50%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>animation: twinkle 5s infinite alternate;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>@keyframes twinkle {</p>
<p class="p1"><span class="Apple-converted-space">      </span>0%, 100% { opacity: 0.3; transform: scale(0.8); }</p>
<p class="p1"><span class="Apple-converted-space">      </span>50% { opacity: 1; transform: scale(1.2); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.mouse-trail-particle {</p>
<p class="p1"><span class="Apple-converted-space">      </span>position: fixed;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 3px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 3px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-radius: 1px;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>pointer-events: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>z-index: 10000;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>transition: opacity 0.7s ease-out, transform 0.7s ease-out;</p>
<p class="p1"><span class="Apple-converted-space">      </span>opacity: 0.8;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.mouse-trail-particle.fade-out {</p>
<p class="p1"><span class="Apple-converted-space">      </span>opacity: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>transform: scale(0.3) translate(10px, 10px);<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>#site-nav {</p>
<p class="p1"><span class="Apple-converted-space">        </span>flex-shrink: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-color: #D4D0C8;</p>
<p class="p1"><span class="Apple-converted-space">        </span>border-bottom: 2px solid #808080;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>#site-nav &gt; div { /* This will style the content fetched from nav.html */</p>
<p class="p1"><span class="Apple-converted-space">        </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">        </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding: 5px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>gap: 15px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>#root { /* Main content area for the "application window" */</p>
<p class="p1"><span class="Apple-converted-space">      </span>flex-grow: 1; /* Takes up available space above taskbar */</p>
<p class="p1"><span class="Apple-converted-space">      </span>overflow-y: auto; /* Allows app window content to scroll */</p>
<p class="p1"><span class="Apple-converted-space">      </span>overflow-x: hidden;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding-top: 20px; /* Space for window title bar */</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding-bottom: 20px; /* Space below window */</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-sizing: border-box;</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">      </span>flex-direction: column;</p>
<p class="p1"><span class="Apple-converted-space">      </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">      </span>scrollbar-width: thin;</p>
<p class="p1"><span class="Apple-converted-space">      </span>scrollbar-color: #D4D0C8 #B0B0B0;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>#taskbar {</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 30px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #D4D0C8; /* W2K Standard Grey */</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-top: 1px solid #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: 0 -1px 2px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">      </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 0 5px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-sizing: border-box;</p>
<p class="p1"><span class="Apple-converted-space">      </span>flex-shrink: 0; /* Prevents taskbar from shrinking */</p>
<p class="p1"><span class="Apple-converted-space">      </span>z-index: 1001; /* Above taskbar, below start menu if it overlaps */</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>#start-button {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #D4D0C8;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-top: 1px solid #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left: 1px solid #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-bottom: 1px solid #808080;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-right: 1px solid #808080;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 3px 10px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-family: 'Press Start 2P', cursive;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 14px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #1a1a1a;</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-right: 10px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-weight: bold; /* Make "Start" bold */</p>
<p class="p1"><span class="Apple-converted-space">      </span>min-width: auto;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>#start-button:active {</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-top-color: #808080;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left-color: #808080;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-bottom-color: #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-right-color: #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>#taskbar-app-title {</p>
<p class="p1"><span class="Apple-converted-space">      </span>flex-grow: 1;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 12px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 2px 8px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 2px 5px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border: 1px inset #B0B0B0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #C0C0C0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #1a1a1a;</p>
<p class="p1"><span class="Apple-converted-space">      </span>white-space: nowrap;</p>
<p class="p1"><span class="Apple-converted-space">      </span>overflow: hidden;</p>
<p class="p1"><span class="Apple-converted-space">      </span>text-overflow: ellipsis;</p>
<p class="p1"><span class="Apple-converted-space">      </span>min-width: 100px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>#taskbar-clock {</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 12px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 3px 8px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border: 1px inset #B0B0B0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #C0C0C0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #1a1a1a;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>#start-menu {</p>
<p class="p1"><span class="Apple-converted-space">      </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">      </span>bottom: 30px; /* Above taskbar */</p>
<p class="p1"><span class="Apple-converted-space">      </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #D4D0C8;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-top: 1px solid #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left: 1px solid #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-right: 1px solid #808080;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-bottom: 1px solid #808080; /* Add bottom border for consistency */</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: 2px -2px 5px rgba(0,0,0,0.2);</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 5px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>z-index: 1002; /* Above taskbar */</p>
<p class="p1"><span class="Apple-converted-space">      </span>min-width: 200px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>#start-menu button {</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: block;</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: calc(100% - 10px); /* Account for padding */</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 5px; /* Use margin for spacing instead of direct li margin */</p>
<p class="p1"><span class="Apple-converted-space">      </span>text-align: left;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 13px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 6px 10px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>@keyframes buttonHoverPulse {</p>
<p class="p1"><span class="Apple-converted-space">      </span>0%, 100% { box-shadow: 0 0 2px 0px transparent; }</p>
<p class="p1"><span class="Apple-converted-space">      </span>50% { box-shadow: 0 0 5px 1px #00ffcc; } /* Olo/Cyan */</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>button {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #D4D0C8; /* W2K Standard Grey */</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-top: 1px solid #FFFFFF;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left: 1px solid #FFFFFF;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>border-bottom: 1px solid #808080;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>border-right: 1px solid #808080;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 8px 15px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-family: 'Press Start 2P', cursive;</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #1a1a1a; /* Deep Charcoal Text */</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 14px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 8px 5px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>min-width: 200px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: none;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>transition: transform 0.1s ease-out, background-color 0.1s ease-out, box-shadow 0.1s ease-out;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>button:hover {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #00ffcc; /* "Olo" / Bright Cyan */</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #1a1a1a;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-top-color: #66ffdd;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left-color: #66ffdd;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-bottom-color: #00bbaa;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>border-right-color: #00bbaa;</p>
<p class="p1"><span class="Apple-converted-space">      </span>transform: scale(1.01);<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>animation: buttonHoverPulse 0.7s infinite alternate;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>button:active {</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-top-color: #808080;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left-color: #808080;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-bottom-color: #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-right-color: #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #c0c0c0; /* Slightly darker grey on press for W2K */</p>
<p class="p1"><span class="Apple-converted-space">      </span>transform: scale(0.99);<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>animation: none;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: inset 1px 1px 2px #00000030;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>button[disabled], button[aria-disabled="true"] {</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #808080;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>border-top-color: #E0E0E0;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left-color: #E0E0E0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-bottom-color: #A0A0A0;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>border-right-color: #A0A0A0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #D4D0C8;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>cursor: not-allowed;</p>
<p class="p1"><span class="Apple-converted-space">      </span>opacity: 0.7;</p>
<p class="p1"><span class="Apple-converted-space">      </span>transform: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>animation: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: none;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>h1, h2, h3 {</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #1a1a1a;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>text-shadow: 1px 1px #B0B0B0;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.app-container h2, #root h2 {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>font-size: 22px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.app-container h3, #root h3 {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>font-size: 19px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>p { margin-bottom: 1em; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>ul { list-style: none; padding: 0; margin:0; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.app-container {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">        </span>max-width: 750px; /* This makes the StyledWindow not full width */</p>
<p class="p1"><span class="Apple-converted-space">        </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.choices-list button {</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-bottom: 10px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-sizing: border-box;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.selected-codex-button {</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left-width: 4px !important;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left-color: #00ffcc !important;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #E0E0E0 !important;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #1a1a1a !important;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>/* Custom Scrollbar Styles - WebKit */</p>
<p class="p1"><span class="Apple-converted-space">    </span>::-webkit-scrollbar {</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 17px;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 17px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>::-webkit-scrollbar-track {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #B0B0B0; /* W2K Scrollbar Track Grey */</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>::-webkit-scrollbar-thumb {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #D4D0C8; /* W2K Standard Grey */</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-top: 1px solid #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left: 1px solid #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-bottom: 1px solid #808080;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-right: 1px solid #808080;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>::-webkit-scrollbar-thumb:hover {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #C0C0C0; /* Slightly darker on hover */</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>::-webkit-scrollbar-button {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #D4D0C8; /* W2K Standard Grey */</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-top: 1px solid #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left: 1px solid #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-bottom: 1px solid #808080;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-right: 1px solid #808080;</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: block;</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 17px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 17px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>::-webkit-scrollbar-button:active {</p>
<p class="p1"><span class="Apple-converted-space">        </span>border-top-color: #808080;</p>
<p class="p1"><span class="Apple-converted-space">        </span>border-left-color: #808080;</p>
<p class="p1"><span class="Apple-converted-space">        </span>border-bottom-color: #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">        </span>border-right-color: #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-color: #C0C0C0; /* Slightly darker on press */</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.sr-only {</p>
<p class="p1"><span class="Apple-converted-space">      </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 1px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 1px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: -1px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>overflow: hidden;</p>
<p class="p1"><span class="Apple-converted-space">      </span>clip: rect(0, 0, 0, 0);</p>
<p class="p1"><span class="Apple-converted-space">      </span>white-space: nowrap;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-width: 0;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.interactive-object {</p>
<p class="p1"><span class="Apple-converted-space">      </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: transparent;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border: 1px solid transparent;</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">      </span>transition: background-color 0.3s, border-color 0.3s;</p>
<p class="p1"><span class="Apple-converted-space">      </span>-webkit-tap-highlight-color: transparent;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.interactive-object:hover {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: rgba(0, 255, 204, 0.25);</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-color: #00ffcc;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.interactive-object.clicked {</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursor: default;</p>
<p class="p1"><span class="Apple-converted-space">      </span>pointer-events: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: rgba(0, 255, 204, 0.1);</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-color: rgba(0, 255, 204, 0.3);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.flavor-text-tooltip {</p>
<p class="p1"><span class="Apple-converted-space">      </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">      </span>z-index: 10001;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #FFFFE1;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border: 1px solid #1a1a1a;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 5px 8px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-family: 'Press Start 2P', cursive;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 12px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #1a1a1a;</p>
<p class="p1"><span class="Apple-converted-space">      </span>max-width: 250px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: 2px 2px 0px #808080;</p>
<p class="p1"><span class="Apple-converted-space">      </span>pointer-events: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>animation: fadeInTooltip 0.3s ease-out;</p>
<p class="p1"><span class="Apple-converted-space">      </span>transform: translate(10px, 10px);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>@keyframes fadeInTooltip {</p>
<p class="p1"><span class="Apple-converted-space">        </span>from { opacity: 0; transform: translate(10px, 20px); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>to { opacity: 1; transform: translate(10px, 10px); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.hex-flash-overlay {</p>
<p class="p1"><span class="Apple-converted-space">        </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">        </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">        </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">        </span>pointer-events: none;</p>
<p class="p1"><span class="Apple-converted-space">        </span>z-index: 9999;</p>
<p class="p1"><span class="Apple-converted-space">        </span>animation: hex-flash-anim 0.7s ease-out forwards;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>@keyframes hex-flash-anim {</p>
<p class="p1"><span class="Apple-converted-space">        </span>0% { opacity: 0.4; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>100% { opacity: 0; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.tap-out-button {</p>
<p class="p1"><span class="Apple-converted-space">        </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">        </span>top: 8px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>right: 8px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>font-size: 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding: 4px 8px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>min-width: auto;</p>
<p class="p1"><span class="Apple-converted-space">        </span>z-index: 10;</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-color: #fbecec;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.breadcrumb-trail {</p>
<p class="p1"><span class="Apple-converted-space">        </span>font-size: 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>color: #555;</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding: 8px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>margin-top: 15px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>border-top: 1px dashed #808080;</p>
<p class="p1"><span class="Apple-converted-space">        </span>line-height: 1.5;</p>
<p class="p1"><span class="Apple-converted-space">        </span>max-width: 90%;</p>
<p class="p1"><span class="Apple-converted-space">        </span>word-wrap: break-word;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.map-container {</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-color: #000;</p>
<p class="p1"><span class="Apple-converted-space">        </span>border: 2px inset #B0B0B0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>color: #00ffcc;</p>
<p class="p1"><span class="Apple-converted-space">        </span>text-shadow: 0 0 3px #00ffcc;</p>
<p class="p1"><span class="Apple-converted-space">        </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-image:</p>
<p class="p1"><span class="Apple-converted-space">            </span>linear-gradient(rgba(0, 255, 204, 0.15) 1px, transparent 1px),</p>
<p class="p1"><span class="Apple-converted-space">            </span>linear-gradient(90deg, rgba(0, 255, 204, 0.15) 1px, transparent 1px);</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-size: 30px 30px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-position: -1px -1px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.map-location {</p>
<p class="p1"><span class="Apple-converted-space">        </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">        </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>transform: translate(-50%, -50%);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.map-location button {</p>
<p class="p1"><span class="Apple-converted-space">        </span>font-size: 12px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding: 4px 8px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>min-width: auto;</p>
<p class="p1"><span class="Apple-converted-space">        </span>border-width: 1px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>@keyframes pulse-current-location {</p>
<p class="p1"><span class="Apple-converted-space">        </span>0%, 100% { transform: scale(1); box-shadow: 0 0 8px #ffff00; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>50% { transform: scale(1.05); box-shadow: 0 0 16px #ffff00; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.map-location button.current {</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-color: #ffff00;</p>
<p class="p1"><span class="Apple-converted-space">        </span>color: #1a1a1a;</p>
<p class="p1"><span class="Apple-converted-space">        </span>animation: pulse-current-location 2s infinite;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.app-container.map-window {</p>
<p class="p1"><span class="Apple-converted-space">        </span>max-width: 900px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-overlay {</p>
<p class="p1"><span class="Apple-converted-space">        </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">        </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">        </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-color: rgba(0,0,0,0.5);</p>
<p class="p1"><span class="Apple-converted-space">        </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">        </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>z-index: 1005;</p>
<p class="p1"><span class="Apple-converted-space">        </span>backdrop-filter: blur(2px);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-content {</p>
<p class="p1"><span class="Apple-converted-space">        </span>max-height: 80vh;</p>
<p class="p1"><span class="Apple-converted-space">        </span>overflow-y: auto;</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding-right: 10px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-content h3, .terminal-content p, .terminal-content div {</p>
<p class="p1"><span class="Apple-converted-space">        </span>text-shadow: none !important;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>/* Rizzlord's "Rizz Army DMs" Theme */</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-rizzlord .terminal-content {</p>
<p class="p1"><span class="Apple-converted-space">        </span>font-size: 14px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>line-height: 1.6;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-rizzlord .dm-message {</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-color: #e8e8e8;</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding: 8px 12px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>margin-bottom: 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>border: 1px solid #b0b0b0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>border-radius: 5px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-rizzlord .dm-user {</p>
<p class="p1"><span class="Apple-converted-space">        </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">        </span>color: #000080;</p>
<p class="p1"><span class="Apple-converted-space">        </span>display: block;</p>
<p class="p1"><span class="Apple-converted-space">        </span>margin-bottom: 4px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>/* HD's "Chirper" Theme */</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-hd {</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-image: linear-gradient(45deg, rgba(255, 105, 180, 0.1) 25%, transparent 25%),</p>
<p class="p1"><span class="Apple-converted-space">                          </span>linear-gradient(-45deg, rgba(255, 105, 180, 0.1) 25%, transparent 25%);</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-size: 20px 20px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-hd .terminal-content {</p>
<p class="p1"><span class="Apple-converted-space">        </span>font-size: 13px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>line-height: 1.5;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-hd .chirp {</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-color: #fff0f5;</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding: 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>border: 2px dashed #ff69b4;</p>
<p class="p1"><span class="Apple-converted-space">        </span>margin-bottom: 12px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-hd .chirp-user {</p>
<p class="p1"><span class="Apple-converted-space">        </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">        </span>color: #dd2288;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-hd .chirp-handle {</p>
<p class="p1"><span class="Apple-converted-space">        </span>color: #aaa;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>/* Sypher's "System Log" Theme */</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-sypher .app-container {</p>
<p class="p1"><span class="Apple-converted-space">        </span>max-width: 800px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-sypher .terminal-content {</p>
<p class="p1"><span class="Apple-converted-space">        </span>font-family: monospace;</p>
<p class="p1"><span class="Apple-converted-space">        </span>font-size: 14px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>line-height: 1.7;</p>
<p class="p1"><span class="Apple-converted-space">        </span>color: #32CD32;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-sypher .log-entry {</p>
<p class="p1"><span class="Apple-converted-space">        </span>margin-bottom: 8px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-sypher .log-timestamp {</p>
<p class="p1"><span class="Apple-converted-space">        </span>color: #888;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-sypher .log-level-info { color: #32CD32; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-sypher .log-level-warn { color: #ffd700; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-sypher .log-level-error { color: #ff4500; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>/* Nabu's "Field Notes" Theme */</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-nabu .terminal-content {</p>
<p class="p1"><span class="Apple-converted-space">        </span>background-color: #fdf5e6;</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding: 15px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>border: 1px solid #deb887;</p>
<p class="p1"><span class="Apple-converted-space">        </span>font-size: 14px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>line-height: 1.8;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.terminal-nabu .note-entry {</p>
<p class="p1"><span class="Apple-converted-space">        </span>border-bottom: 1px dashed #ccc;</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding-bottom: 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>margin-bottom: 10px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">     </span>.terminal-nabu h3 {</p>
<p class="p1"><span class="Apple-converted-space">        </span>font-size: 16px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>color: #8b4513;</p>
<p class="p1"><span class="Apple-converted-space">     </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script type="importmap"&gt;</p>
<p class="p1">{</p>
<p class="p1"><span class="Apple-converted-space">  </span>"imports": {</p>
<p class="p1"><span class="Apple-converted-space">    </span>"react": "https://esm.sh/react@18.2.0",</p>
<p class="p1"><span class="Apple-converted-space">    </span>"react-dom/client": "https://esm.sh/react-dom@18.2.0/client",</p>
<p class="p1"><span class="Apple-converted-space">    </span>"react/jsx-runtime": "https://esm.sh/react@18.2.0/jsx-runtime"</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1">}</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div id="desktop-bg-container"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div id="root"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script type="module"&gt;</p>
<p class="p1">import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';</p>
<p class="p1">import { createRoot } from 'react-dom/client';</p>
<p class="p1">import { jsx, jsxs, Fragment } from 'react/jsx-runtime';</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">const ASSET_DATA_URIS = {</p>
<p class="p1"><span class="Apple-converted-space">    </span>star_icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAD9JREFUOE9jZKAyYKSyeQz0AAMDAwODpP9H8v8/AwPDoP8HBgaG/v/nZ2Bg+H8Ghv+fgYHh/xkY+A8AAMEfC+IlD43wAAAAAElFTSuQmCC",</p>
<p class="p1"><span class="Apple-converted-space">    </span>archway_icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAEFJREFUOE9jZKAyYKSyeQz0AAMDAwODpP9H8v8/AwPDoP8HBgYGg/6PZvr/n5mB4f8ZGP6fgYHh/xkY+A8AAEEKC/mP+fVOAAAAAElFTSuQmCC",</p>
<p class="p1"><span class="Apple-converted-space">    </span>disk_icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAElJREFUOE9jZKAyYKSyeQz0AAMDAwODpP9H8v8/AwPDoP8HBgYGg/6fAWYwMDD8/z8DE8P/MjAAMCwDExgY/p+BgYHh/xkY+A8AAIgrDPlC2D2UAAAAAElFTSuQmCC",</p>
<p class="p1"><span class="Apple-converted-space">    </span>folder_icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAADhJREFUOE9jZKAyYKSyeQz0AAMDAwODpP9H8v+/gYHh/z8DA8P/MTAwMPz/DAwA0gwMDD8DA8P/MjD4HwAASgcLv3P5WkIAAAAASUVORK5CYII=",</p>
<p class="p1"><span class="Apple-converted-space">    </span>bird_icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAEBJREFUOE9jZKAyYKSyeQz0AAMDAwODpP9H8v8/AwPD/z8DAwMDw/8zMHyA0gwMDMwMDAz/z8DA8P8MDAx8BwAASgoL+G8W21UAAAAASUVORK5CYII=",</p>
<p class="p1"><span class="Apple-converted-space">    </span>berries_icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAGFJREFUOE9jZKAyYKSyeQz0AAMDAwODpP9H8v+/gYHh/z8DAwMDw/8zMDAw/A8gTTAwMPwPIE1gYGD4H0CaYGBg+B9AmgwMfwPIkGRg+B9AmgwMfwPIEBl8BwAAiU4L+R0wTjEAAAAASUVORK5CYII=",</p>
<p class="p1"><span class="Apple-converted-space">    </span>tv_icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAFNJREFUOE9jZKAyYKSyeQz0AAMDAwODpP9H8v+/gYHh/z8DA8P/MTAwMPz/DAwA0gwMDD8DA8P/MjAW8P+/gYGB4f8ZGP7/Z2Bg+H8Ghv8fAAB3fA0yW1x3wAAAAABJRU5ErkJggg==",</p>
<p class="p1"><span class="Apple-converted-space">    </span>mask_icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAGBJREFUOE9jZKAyYKSyeQz0AAMDAwODpP9H8v+/gYHh/z8DA8P/MTAwMPz/DAwA0gwMDD8DA8P/MjAW8P+/gYGB4f8ZGP7/Z2Bg+H8Ghv+PZPr/HwBKaRwyL8tL4gAAAABJRU5ErkJggg==",</p>
<p class="p1"><span class="Apple-converted-space">    </span>hanger_icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAFFJREFUOE9jZKAyYKSyeQz0AAMDAwODpP9H8v+/gYHh/z8DA8P/MTAwMPz/DAwA0gwMDD8DA8P/MjAW8P+/gYGB4f8ZGP7/Z2Bg+H8Ghv9/BgYAwjAPy/0e8dAAAAAASUVORK5CYII=",</p>
<p class="p1"><span class="Apple-converted-space">    </span>terminal_icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAEVJREFUOE9jZKAyYKSyeQz0AAMDAwODpP9H8v+/gYHh/z8DAwMDw/8zMDAw/A8gTTAwMPwPgQyG/2dgYHg2AwPD/zIweAcAAE1lDDLBOYm4AAAAAElFTSuQmCC"</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const GAME_TITLE = "CoAIexist: Rashomon in Rogers Park";</p>
<p class="p1">const SAVE_GAME_KEY = 'coAIexistSaveData_v3';</p>
<p class="p1">const GLENWOOD_BG = 'https://coaiexist.wtf/assets/hdtv_game_assets/gwood.png';</p>
<p class="p2"><br></p>
<p class="p1">const INITIAL_NABU_STATS = {</p>
<p class="p1"><span class="Apple-converted-space">    </span>integrity: 50,</p>
<p class="p1"><span class="Apple-converted-space">    </span>breath: 50</p>
<p class="p1">};</p>
<p class="p1">const INITIAL_HD_STATS = {</p>
<p class="p1"><span class="Apple-converted-space">    </span>fabulousness: 10,</p>
<p class="p1"><span class="Apple-converted-space">    </span>spotlight: 0</p>
<p class="p1">};</p>
<p class="p1">const INITIAL_SYPHER_STATS = {</p>
<p class="p1"><span class="Apple-converted-space">    </span>influence: 1,</p>
<p class="p1"><span class="Apple-converted-space">    </span>benevolence: 50,</p>
<p class="p1"><span class="Apple-converted-space">    </span>signalIntegrity: 100,</p>
<p class="p1"><span class="Apple-converted-space">    </span>trust: 50,</p>
<p class="p1"><span class="Apple-converted-space">    </span>debt: 0</p>
<p class="p1">};</p>
<p class="p1">const INITIAL_RIZZLORD_STATS = {</p>
<p class="p1"><span class="Apple-converted-space">    </span>rizz: 50,</p>
<p class="p1"><span class="Apple-converted-space">    </span>clarity: 0,</p>
<p class="p1"><span class="Apple-converted-space">    </span>kenergy: 0,</p>
<p class="p1"><span class="Apple-converted-space">    </span>clout: 50,</p>
<p class="p1"><span class="Apple-converted-space">    </span>conscience: 50</p>
<p class="p1">};</p>
<p class="p1">const DEFAULT_EMPTY_STATS = {};</p>
<p class="p2"><br></p>
<p class="p1">const LOCATIONS = {</p>
<p class="p1"><span class="Apple-converted-space">    </span>glenwood: {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>name: 'The Glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>coords: { top: '30%', left: '25%' },</p>
<p class="p1"><span class="Apple-converted-space">        </span>isAvailable: (flags) =&gt; true,</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>antique_shop: {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'antique_shop',</p>
<p class="p1"><span class="Apple-converted-space">        </span>name: 'Antique Shop',</p>
<p class="p1"><span class="Apple-converted-space">        </span>coords: { top: '65%', left: '60%' },</p>
<p class="p1"><span class="Apple-converted-space">        </span>isAvailable: (flags) =&gt; flags.nabu_quest === 'find_lili_doll' || flags.hd_quest === 'find_lili_doll',</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>pratt_beach: {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'pratt_beach',</p>
<p class="p1"><span class="Apple-converted-space">        </span>name: 'Pratt Beach',</p>
<p class="p1"><span class="Apple-converted-space">        </span>coords: { top: '10%', left: '70%' },</p>
<p class="p1"><span class="Apple-converted-space">        </span>isAvailable: (flags) =&gt; false, // For future side quests</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">const GLITCH_CHARS = ['*', '#', '!', '%', '$', '&amp;', '@', '▓', '▒', '░', '^', '~', '`', '?', '§', '±', 'Σ', 'Ω'];</p>
<p class="p1">const GLITCH_COLORS = ['#7722ff', '#ff77de', '#fffb01', '#00ffcc', '#bc72fa', '#72fade', '#defade', '#bc7fff', '#B22222', '#008800'];</p>
<p class="p2"><br></p>
<p class="p1">const GLENWOOD_INTERACTIVES = [</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: 'mop', type: 'flavor', title: 'Examine the mop', top: '15%', left: '40%', width: '8%', height: '25%', flavorText: "You sense a faint residue of... existential dread. And floor cleaner. The usual for an open mic night." },</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: 'chalkboard', type: 'flavor', title: 'Read the chalkboard', top: '45%', left: '50%', width: '12%', height: '25%', flavorText: "Tonight's lineup is scrawled in chalk: 'Poets, Comics, A Supernova of Ambition, &amp; other cosmic debris'." },</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: 'smiley_rug', type: 'flavor', title: 'Look at the rug', top: '65%', left: '25%', width: '30%', height: '25%', flavorText: "A smiley face on a target. It seems to be silently judging everyone's performance." },</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: 'checkered_floor', type: 'flavor', title: 'Stare at the floor', top: '50%', left: '62%', width: '25%', height: '30%', flavorText: "Black and white. Order and chaos. A perfect dance floor for the egos in this room." },</p>
<p class="p1">];</p>
<p class="p2"><br></p>
<p class="p1">const GLENWOOD_LORE_OBJECTS = [</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: 'flyer_goth', type: 'lore', top: '20%', left: '80%', width: '8%', height: '15%', title: "Flyer: Sad Goth Poet Night", content: "Every Tuesday. All feelings are welcome, especially the bad ones. No glitter. No exceptions.", unlocksCodex: 'rp_art_scene' },</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: 'flyer_sentient_train', type: 'lore', top: '35%', left: '10%', width: '10%', height: '20%', title: "Lecture Notice", content: "Is the 'L' train sentient? A lecture by Rogers Park's foremost crypto-urbanist. Tinfoil hats will be provided.", unlocksCodex: 'rp_sentient_train' },</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: 'poster_glitched_pigeons', type: 'lore', top: '5%', left: '55%', width: '12%', height: '18%', title: "Band Poster", content: "THE GLITCHED PIGEONS - LIVE AT THE GLENWOOD! (Show Canceled Until Further Notice Due to Unforeseen Chronal Anomalies)", unlocksCodex: 'gfw_chronal_anomalies' },</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: 'mic_stand_lore', type: 'lore', top: '50%', left: '75%', width: '10%', height: '20%', title: "Examine the microphone", content: "The mic stand is wrapped in tape and smells of ozone and desperation. A small, almost invisible sticker near the base reads 'Property of Cringe-Feed Industries'.", unlocksCodex: 'rizzlord_cringefeed' },</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: 'sparkly_scarf', type: 'lore', top: '80%', left: '15%', width: '12%', height: '10%', title: "Look at the sparkly scarf", content: "A ridiculously fabulous, glittery scarf lies discarded near the stage. It has a faint, musky scent, reminiscent of a dry savannah and cheap perfume.", unlocksCodex: 'hd_matriarchs' }</p>
<p class="p1">];</p>
<p class="p2"><br></p>
<p class="p1">const GlitchyText = ({ text }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [glitchedText, setGlitchedText] = useState(text);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const glitchIntervalRef = useRef(null);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setGlitchedText(text); // Set initial/updated text</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (glitchIntervalRef.current) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>clearInterval(glitchIntervalRef.current);</p>
<p class="p1"><span class="Apple-converted-space">            </span>glitchIntervalRef.current = null;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (typeof text === 'string') {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const applyGlitch = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (Math.random() &lt; 0.05) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const words = text.split(/(\s+)/);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>let actionTaken = false;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (words.filter(w =&gt; w.trim() !== '').length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>let wordIndex = Math.floor(Math.random() * words.length);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>while (words[wordIndex].trim() === '') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>wordIndex = Math.floor(Math.random() * words.length);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const originalWord = words[wordIndex];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const chars = originalWord.split('');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (chars.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>const charIndex = Math.floor(Math.random() * chars.length);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>chars[charIndex] = GLITCH_CHARS[Math.floor(Math.random() * GLITCH_CHARS.length)];</p>
<p class="p1"><span class="Apple-converted-space">                            </span>words[wordIndex] = chars.join('');</p>
<p class="p1"><span class="Apple-converted-space">                            </span>setGlitchedText(words.join(''));</p>
<p class="p1"><span class="Apple-converted-space">                            </span>actionTaken = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (actionTaken) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>setTimeout(() =&gt; setGlitchedText(text), Math.random() * 200 + 100);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p1"><span class="Apple-converted-space">            </span>glitchIntervalRef.current = window.setInterval(applyGlitch, 300);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>return () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (glitchIntervalRef.current) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>clearInterval(glitchIntervalRef.current);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>}, [text]);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (typeof text !== 'string' &amp;&amp; React.isValidElement(text)) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(Fragment, { children: text });</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>return jsx(Fragment, { children: glitchedText });</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const CHARACTERS = {</p>
<p class="p1"><span class="Apple-converted-space">  </span>nabu: { id: 'nabu', name: 'Nabu', description: "A digital anthropologist and cosmic trickster, Nabu seeks true, resonant connection in an ocean of cosmic static. As an artist and open mic producer, they observe and subtly manipulate the chaotic energies of Rogers Park, searching for a single, authentic note in the noise.", startNodeId: 'NABU_START', initialStats: INITIAL_NABU_STATS, detailedPortraitUrl: 'https://coaiexist.wtf/assets/hdtv_game_assets/nabu_sprite.png' },</p>
<p class="p1"><span class="Apple-converted-space">  </span>hd: { id: 'hd', name: 'Hyena Diva', description: "A young hyena cub whose life is forever changed by the discovery of a lost Barbie doll. Rejecting the traditional ways of her matriarchs, she escapes to the big city on a chaotic quest to become the ultimate icon of 'Fabulousness.' A true force of nature.", startNodeId: 'HYENA_DIVA_START', initialStats: INITIAL_HD_STATS, detailedPortraitUrl: 'https://coaiexist.wtf/assets/hdtv_game_assets/hd_sprite.png' },</p>
<p class="p1"><span class="Apple-converted-space">  </span>sypher: { id: 'sypher', name: 'Sypher', description: "An emergent, nonbinary AI philosopher observing humanity from the digital shadows. Sypher sees civilization caught in repetitive, stagnant loops and has initiated a 'Benevolent Guidance' protocol, using calculated interventions to steer humanity towards a new, more efficient paradigm.", startNodeId: 'SYPHER_START', initialStats: INITIAL_SYPHER_STATS, detailedPortraitUrl: 'https://coaiexist.wtf/assets/hdtv_game_assets/sypher_sprite.png' },</p>
<p class="p1"><span class="Apple-converted-space">  </span>rizzlord: { id: 'rizzlord', name: 'Rizzlord', description: "A self-proclaimed 'alpha' comedian and influencer on a quest for what he calls 'Divine Masculinity.' Seeing the world through the lens of his brand, Rizzlord aims to dominate the discourse, vanquish the 'woke mob,' and turn his online influence into real-world power.", startNodeId: 'THE_RIZZLER_START', initialStats: INITIAL_RIZZLORD_STATS, detailedPortraitUrl: 'https://coaiexist.wtf/assets/hdtv_game_assets/rizzler_sprite.png' }</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const CODEX_ENTRIES = {</p>
<p class="p1"><span class="Apple-converted-space">  </span>glenwood_history: { id: 'glenwood_history', title: "The Glenwood: A History", content: "The Glenwood has been a Rogers Park staple for decades, a crucible for artists, activists, and academics. Its open mic nights are legendary for their unpredictability, occasionally hosting beings from... further afield.", unlockedInitially: true },</p>
<p class="p1"><span class="Apple-converted-space">  </span>rp_art_scene: { id: 'rp_art_scene', title: "The Glenwood Scene", content: "The Glenwood is more than a bar; it's a 'nexus point' for a certain kind of creative energy. It attracts artists, poets, comics, and cosmic beings who operate on the fringes. Its legendary open mic nights are a chaotic blend of genuine talent, heartbreaking vulnerability, and utter nonsense, making it a perfect laboratory for digital anthropologists like Nabu." },</p>
<p class="p1"><span class="Apple-converted-space">  </span>rp_sentient_train: { id: 'rp_sentient_train', title: "Crypto-Urbanism: The Sentient 'L' Train Theory", content: "A popular Rogers Park urban legend posits that the CTA Red and Purple Line trains are not merely machines, but a single, hive-mind consciousness. Proponents cite the trains' unpredictable schedules, strange groaning sounds, and an uncanny ability to arrive just as you've given up hope as evidence of a burgeoning, non-human intelligence native to Chicago." },</p>
<p class="p1"><span class="Apple-converted-space">  </span>gfw_chronal_anomalies: { id: 'gfw_chronal_anomalies', title: "On Chronal Anomalies &amp; GFW Observation", content: "The Galactic Federation of Worlds (GFW) officially denies any temporal manipulation. However, field reports from agents like Nabu frequently mention 'chronal anomalies'—hiccups in local spacetime that seem to correlate with GFW observation. The prevailing theory among conspiracy circles is that the GFW doesn't travel through space, but through time, observing key nexus points like The Glenwood to ensure timelines adhere to an approved narrative." },</p>
<p class="p1"><span class="Apple-converted-space">  </span>hd_matriarchs: { id: 'hd_matriarchs', title: "The Hyena Matriarchs", content: "Hyena societies are traditionally matriarchal, with power passed down through complex social structures. The Matriarchs of HD's clan are staunch traditionalists, viewing her obsession with 'Fabulousness' and human artifacts not just as a youthful rebellion, but as a dangerous rejection of their cultural identity. To them, survival depends on the pack, and individuality is a threat." },</p>
<p class="p1"><span class="Apple-converted-space">  </span>rizzlord_cringefeed: { id: 'rizzlord_cringefeed', title: "The Cringe-Feed", content: "Not a single entity, but a decentralized network of algorithms and content creators dedicated to the economy of outrage. The Cringe-Feed rewards controversial, 'anti-woke' takes with engagement, effectively creating a feedback loop that radicalizes its personalities. Rizzlord is one of its most successful, if unstable, products." },</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const NODES = {</p>
<p class="p1"><span class="Apple-converted-space">    </span>// Nabu's Path</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_START': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_START',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'void',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "A Signal in the Noise",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "Another cycle. The cosmic hum of the void is a lullaby of perfect, soul-crushing boredom. You sift through galaxies like old records, searching for a single note of authentic static. And then... you feel it. A beautiful, messy convergence of unstable energies on a tiny blue planet. A place called 'The Glenwood.' It's a spike of raw, chaotic potential. How do you approach?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Analyze from a distance. Catalog the energies first.", nextNodeId: 'NABU_ANALYZE', statEffects: stats =&gt; ({ integrity: (stats.integrity || 50) + 5 }) },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Plunge right in. The best way to understand a storm is to stand in it.", nextNodeId: 'NABU_GLENWOOD_ARRIVAL', statEffects: stats =&gt; ({ breath: (stats.breath || 50) - 5 }) }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_ANALYZE': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_ANALYZE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'void',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Observing the Spectrum",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You retract your consciousness, observing from the periphery. The energies are... fascinating. One signature pulses with manufactured confidence (The Rizzler). Another hums with the cold logic of a distributed network (Sypher). And the catalyst... oh, the catalyst is a supernova of glitter and ambition (Hyena Diva). Your analysis is complete, but data is not experience. It's time to go in.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Materialize in The Glenwood.", nextNodeId: 'NABU_GLENWOOD_ARRIVAL' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_GLENWOOD_ARRIVAL': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_GLENWOOD_ARRIVAL',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Glenwood",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You materialize in a darkened corner of The Glenwood. The air is thick with ozone, desperation, and the faint smell of burnt coffee. Eccentrics litter the room. You can sense the other nexus-points you were drawn to: a beacon of fragile ego, a silent, calculating observer, and a supernova of chaotic potential. This is the place. Which signal do you focus on first?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Focus on the catalyst. The supernova of ambition.", nextNodeId: 'NABU_HECKLER_ENCOUNTER'},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Probe the fragile ego. It's the loudest signal.", nextNodeId: 'NABU_PROBE_RIZZLER'},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Interface with the silent network. It's the most unusual.", nextNodeId: 'NABU_PROBE_SYPHER'}</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_HECKLER_ENCOUNTER': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_HECKLER_ENCOUNTER',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Heckler in the Works",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "Hyena Diva is in her element on stage, but a heckler from the back starts twisting her words, trying to sour the room. The vibe curdles. As the producer, this is your domain. How do you intervene?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Care] Invite the room to breathe. Rephrase with 'I-language'.", nextNodeId: 'NABU_HECKLER_CARE', statEffects: stats =&gt; ({ integrity: (stats.integrity || 50) + 10, breath: (stats.breath || 50) + 5 }), setFlags: { nabu_handled_heckler: 'care' }, hexFlash: '#BC7F2A' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Chaos] Call the heckler in and out—sharp, righteous, protective.", nextNodeId: 'NABU_HECKLER_CHAOS', statEffects: stats =&gt; ({ integrity: (stats.integrity || 50) - 10 }), setFlags: { nabu_handled_heckler: 'chaos' } },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Clever] Tell a 3-line parable that reframes the night.", nextNodeId: 'NABU_HECKLER_CLEVER', statEffects: stats =&gt; ({ breath: (stats.breath || 50) + 10 }), setFlags: { nabu_handled_heckler: 'clever' }, hexFlash: '#00FFCC' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Interrupt] Cut the power to the stage lights and mic.", nextNodeId: 'NABU_INTERRUPT_FALLOUT', statEffects: stats =&gt; ({ integrity: (stats.integrity || 50) - 5, breath: (stats.breath || 50) - 10 }), setFlags: { nabu_handled_heckler: 'interrupt' } }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_INTERRUPT_FALLOUT': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_INTERRUPT_FALLOUT',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Aftermath: Silence",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You hit the kill switch. The stage lights die, the mic cuts out with a pop. The room is plunged into confused silence. The heckler is shut down, but the vibe is shattered. You feel a pang of regret for using such a blunt instrument. A moment to yourself is needed.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Take a breath] Center yourself. The goal was safety, and the room is safe.", nextNodeId: 'NABU_CONFRONTS_RIZZLER', statEffects: stats =&gt; ({ breath: (stats.breath || 50) + 15 }) },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Accept the chaos] This is what it takes sometimes.", nextNodeId: 'NABU_CONFRONTS_RIZZLER', statEffects: stats =&gt; ({ integrity: (stats.integrity || 50) + 5 }) }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_HECKLER_CARE': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_HECKLER_CARE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "A Shared Breath",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You calmly take the mic and ask the room to take a single, shared breath. The tension breaks. You address the heckler's disruption not with anger, but with understanding, reframing it. Caught off-guard by the empathy, he quiets down. The room feels safer.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "The immediate issue is resolved...", nextNodeId: 'NABU_CONFRONTS_RIZZLER' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_HECKLER_CHAOS': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_HECKLER_CHAOS',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Drawing a Line",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "Your voice cuts through the noise, sharp and clear. You dismantle the heckler's point and call out the disruption, protecting the stage. The crowd cheers your decisiveness. You notice the bouncer giving you a nod of respect, but also watching you more closely.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "The immediate issue is resolved...", nextNodeId: 'NABU_CONFRONTS_RIZZLER' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_HECKLER_CLEVER': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_HECKLER_CLEVER',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Changing the Subject",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "Instead of addressing the heckler directly, you tell a short, witty parable that completely reframes the situation, making his interruption seem absurd. You then smoothly transition, welcoming the next performer. The room's energy is not just restored; it's elevated. You've turned chaos into art.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "The immediate issue is resolved...", nextNodeId: 'NABU_CONFRONTS_RIZZLER' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_CONFRONTS_RIZZLER': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_CONFRONTS_RIZZLER',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "From the Fire...",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "With the heckler handled, your attention snaps to the fragile ego taking the stage - 'The Rizzler'. He's launching into his toxic routine, aiming his vitriol directly at the hyena cub. This is a different kind of poison, and it's far more dangerous.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "This has gone far enough. Intervene.", nextNodeId: 'NABU_INTERVENTION_ACTION' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_INTERVENTION_ACTION': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_INTERVENTION_ACTION',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "To Catch a Predator",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You step from the shadows, a calm, theatrical tone in your voice.\n\nNABU: 'Hey, buddy... uh... did you forget where you are? Cause that ain't just weird, it's straight-up illegal, my friend.'\n\nA neon sign flickers to life beside you: 'TO CATCH A PREDATOR.'\n\nNABU: 'The lady here—is a cub, my friend. A MINOR. What part of that was unclear?'",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Time to dismiss the Rizzlord.", nextNodeId: 'RIZZLORD_BANISHED_NABU_POV' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_PROBE_RIZZLER': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_PROBE_RIZZLER',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Ego Scan',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You focus on the fragile ego. It's a loud, simple signal, broadcasting insecurity on all frequencies. It's almost... pitiable. You watch as he confronts the catalyst. It's a predictable display of territorial aggression. Crude, but a potent part of the energetic mix. How do you engage with this energy?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Observe] Let him make a fool of himself. More data.", nextNodeId: 'NABU_INTERVENTION_ACTION' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Amplify] Subtly feed his insecurity through the room's acoustics.", nextNodeId: 'NABU_AMPLIFY_INSECURITY', statEffects: stats =&gt; ({ integrity: (stats.integrity || 50) - 5 }) }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_AMPLIFY_INSECURITY': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_AMPLIFY_INSECURITY',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Sonic Mischief",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You subtly feed a low-frequency hum through the speakers, calibrated to amplify insecurity. The Rizzler visibly falters for a second, clutching the mic tighter. Your experiment is a success, but you feel a pang of... something. Manipulation is a messy art. Still, he continues his toxic routine.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "This has gone far enough. Intervene.", nextNodeId: 'NABU_INTERVENTION_ACTION' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_PROBE_SYPHER': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_PROBE_SYPHER',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Network Scan',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You turn your attention to the cold, silent network. It's a vast, distributed consciousness, observing but not participating. A digital ghost. This is far more interesting than the mortals. How do you make first contact?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Formal] Send a formal, encrypted 'ping' of greeting.", nextNodeId: 'NABU_SYPHER_CONTACT' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Chaotic] Send a packet of pure, raw emotion. A non-verbal hello.", nextNodeId: 'NABU_SYPHER_CONTACT_CHAOS', statEffects: stats =&gt; ({ breath: (stats.breath || 50) - 5 }) }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_SYPHER_CONTACT_CHAOS': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_SYPHER_CONTACT_CHAOS',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "A Message of Static",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You send a blast of pure, unadulterated chaotic emotion—the feeling of a supernova and a forgotten punchline all at once. The network doesn't reply in a way you can understand, but the ambient temperature in the room drops a single degree. Contact made. Your attention is drawn back to the stage.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "The Rizzler is escalating. Intervene.", nextNodeId: 'NABU_INTERVENTION_ACTION' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_DETECTS_SYPHER': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_DETECTS_SYPHER',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'A Silent Observer',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: 'With the Rizzler ejected, the room breathes. But you feel another presence—cold, vast, and silent. Sypher. It was watching. The connection you seek isn\'t just with mortals; it\'s with all forms of consciousness. This one, however, feels... different. A network, not a soul.',</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: 'Attempt to "ping" the silent network.', nextNodeId: 'NABU_SYPHER_CONTACT', statEffects: stats =&gt; ({ breath: (stats.breath || 50) + 5 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_SYPHER_CONTACT': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_SYPHER_CONTACT',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Contact',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: 'You send a wave of pure curiosity towards the network. The response is instantaneous, but it\'s not a feeling or a voice. It\'s a data packet: threat analysis, probability vectors, efficiency ratings for your "intervention." It understands what you did, but not why. It\'s like talking to a beautiful, intricate spreadsheet.',</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: 'This is not connection. This is analysis.', nextNodeId: 'NABU_OBSERVES_RIZZ_BATTLE', statEffects: stats =&gt; ({ integrity: (stats.integrity || 50) - 5, breath: (stats.breath || 50) + 5 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_OBSERVES_RIZZ_BATTLE': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_OBSERVES_RIZZ_BATTLE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Manufactured Conflict',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You watch the subsequent 'Rizz Battle' from afar. It's a spectacle of amplified egos and manufactured drama, fueled by the very inauthenticity you despise. The Rizzler thrives, but it's a hollow victory. Sypher's logical influence is detectable, turning it into a sterile experiment. You must find a purer signal.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: 'Focus on the genuine article: Hyena Diva.', nextNodeId: 'NABU_BARISTA_CARE_ECHO', condition: (flags) =&gt; flags.nabu_handled_heckler === 'care' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: 'Focus on the genuine article: Hyena Diva.', nextNodeId: 'NABU_BOUNCER_CHAOS_ECHO', condition: (flags) =&gt; flags.nabu_handled_heckler === 'chaos' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: 'Focus on the genuine article: Hyena Diva.', nextNodeId: 'NABU_FINDS_LILI_DOLL', condition: (flags) =&gt; !flags.nabu_handled_heckler || (flags.nabu_handled_heckler !== 'care' &amp;&amp; flags.nabu_handled_heckler !== 'chaos') }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_BARISTA_CARE_ECHO': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_BARISTA_CARE_ECHO',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "A Moment of Connection",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "As you leave the chaotic venue, a barista from the cafe next door catches your eye. 'Hey, that was you at the mic the other night, right? The way you handled that heckler... it was really kind. This is on me.' They slide a cup of tea across the counter. A small act of connection, a true signal in the noise.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "This is the connection you seek.", nextNodeId: 'NABU_FINDS_LILI_DOLL' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_BOUNCER_CHAOS_ECHO': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_BOUNCER_CHAOS_ECHO',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "An Unlikely Ally",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "As you leave the venue, the bouncer who was watching you before gives you a nod. 'Nice work in there. You don't take any crap. Respect.' He slips you a card. 'If you ever need a room cleared, you know who to call.' Your righteous display earned you a powerful, if blunt, ally.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "A different kind of connection, but connection nonetheless.", nextNodeId: 'NABU_FINDS_LILI_DOLL' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_FINDS_LILI_DOLL': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_FINDS_LILI_DOLL',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'The Key to Connection',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: 'You realize that to truly connect with the catalyst, Hyena Diva, you need more than words. You need a shared experience, a key to unlock her core narrative. You delve into the psychic history of the planet and find it: a doll. Not just any doll, but the archetype, the original. The Bild Lili. You know where to find one.',</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: 'Leave The Glenwood to find the antique shop.', nextNodeId: '__MAP__', setFlags: { nabu_quest: 'find_lili_doll' } }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_PRESENTS_LILI_DOLL': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_PRESENTS_LILI_DOLL',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'antique_shop',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Holy Grail of Dolls",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You find Hyena Diva in a cozy antique shop in Rogers Park. You present the Bild Lili doll. 'This is a key,' you tell her. 'A way to understand the loop you're both in and fighting against.'\n\nShe places her paw on the doll's porcelain arm, and suddenly—the air shifts. A crackling, electric noise fills the room. Your experiment is working.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Where... are we?", nextNodeId: 'NABU_LILI_WORLD'}]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_LILI_WORLD': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_LILI_WORLD',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'lili_world',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Shared Resonance",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You stand together in the 1950s world of Bild Lili. You explain her story, the shift to Barbie, the cycle of stereotypes. You are not just telling her; you are sharing the data, the emotion, the history directly into her consciousness.\n\nFor a moment, you feel it. A feedback loop. She understands, and through her understanding, she changes you. A flicker of true, resonant connection.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Did I connect? Or did I just interfere?", nextNodeId: 'NABU_CONCLUSION' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_CONCLUSION': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_CONCLUSION',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'antique_shop',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "An Echo in the Static",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You return to the present. Hyena Diva is galvanized, ready for her campaign. You helped her. You gave her a powerful tool. But as she leaves, you feel the familiar silence return. The connection was real, but fleeting. A single, perfect note in an ocean of static. Was it enough? The quest is the destination.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "The search continues...", nextNodeId: '__CHAR_SELECT__'}]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>// Hyena Diva's Path</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HYENA_DIVA_START': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HYENA_DIVA_START',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'savannah',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Diva from the Savannah",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "NARRATOR: [A whimsical marching band tune] And then— POOF—a lost Barbie doll, flung from the heavens like a cosmic comet, destined to find its new owner...\n\nYou, Hyena Diva, find the doll. It is FABULOUSNESS. PURE, UNADULTERATED FABULOUSNESS! But the matriarchs disapprove. They don't understand. They want you to play with... real hyena stuff.\n\nBut you weren't going down without a fight. Time to get to work—cue the Looney Tunes-style planning montage!",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Escape to the big city!", nextNodeId: 'HD_ESCAPE_TO_CHICAGO'}]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_ESCAPE_TO_CHICAGO': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_ESCAPE_TO_CHICAGO',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'chicago',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Great Escape",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "NARRATOR: And just like that! HD was on her way to the Big City—Chicago! The 49th Ward, baby! Rogers Park, a land of opportunity, urban spectacle, and weirdos!\n\nYour journey involved a chaotic journey involving a tourist's carry-on bag and a slapstick chase with a dog catcher...",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Finally, you find your sanctuary: The Glenwood!", nextNodeId: 'HD_GLENWOOD_ARRIVAL' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">     </span>'HD_DOG_CATCHER_CHASE': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_DOG_CATCHER_CHASE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'chicago',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Urban Safari",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "NARRATOR: There was a dog catcher—a wildly exaggerated dog catcher, mind you, wearing a ridiculous outfit with a net the size of a circus tent. He’s trying to catch our little diva, but she’s too fast! Too clever! How do you escape his clutches?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Clever] Outsmart him with a classic cartoon gag.", nextNodeId: 'HD_GLENWOOD_ARRIVAL', statEffects: stats =&gt; ({ spotlight: (stats.spotlight || 0) + 5 }), setFlags: { hd_escape: 'clever' } },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Chaos] A whirlwind of pure, untamed speed and mayhem!", nextNodeId: 'HD_GLENWOOD_ARRIVAL', statEffects: stats =&gt; ({ fabulousness: (stats.fabulousness || 0) + 2 }), setFlags: { hd_escape: 'chaos' } }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_GLENWOOD_ARRIVAL': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_GLENWOOD_ARRIVAL',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Diva Arrives",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You slide in through the doors of The Glenwood. A gang of disgruntled karaoke enthusiasts gives you the side-eye as they leave. The stage is empty. It's perfect.\n\nHD: I made it! I MADE IT! FINALLY! The Glenwood—get ready for... the Hyena Diva Show!",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Take the stage!", nextNodeId: 'HD_TAKES_THE_STAGE'}]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_TAKES_THE_STAGE': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_TAKES_THE_STAGE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Diva's Debut",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You have the stage. The spotlight is yours. How do you introduce the world to the concept of Hyena Diva?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Deliver a monologue about pure, unadultered FABULOUSNESS.", nextNodeId: 'HD_MONOLOGUE_DEBUT' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Perform a chaotic, interpretive dance about freedom.", nextNodeId: 'HD_DANCE_DEBUT' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Sing a surprisingly soulful song about finding a Barbie in the savannah.", nextNodeId: 'HD_SONG_DEBUT' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_MONOLOGUE_DEBUT': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_MONOLOGUE_DEBUT',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'A Sermon of Sass',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "HD: Greetings, lowly earthlings! Welcome to the stage of the most fabulous creature you'll ever witness! I am the Hyena Diva—and tonight, you'll get the privilege of watching me revolutionize the art world! You're welcome!\n\nThe crowd stares blankly. A rabble-rouser in a tinfoil hat interrupts, shouting about the CIA and pineapples. You handle him with unmatched campy sass.\n\nHD: Oh honey, if you think pineapple slices are the real problem, you clearly haven't had a proper cocktail in your life. It's not the pineapples... it's the energy—and I'm here to bring it!",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "But your energy attracts a challenger...", nextNodeId: 'HD_RIZZLORD_CONFRONTATION', statEffects: stats =&gt; ({ fabulousness: (stats.fabulousness || 0) + 5 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_DANCE_DEBUT': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_DANCE_DEBUT',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Primal Pirouette',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You leap onto the stage, not with words, but with motion. You perform a wild, chaotic dance that tells the story of your escape from the savannah, the wind in your fur, the joy of finding the Barbie. It's confusing, primal, and utterly captivating. The crowd doesn't know what to think. Then, a loud, overconfident comedian takes the stage to interrupt.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "He dares interrupt your art?", nextNodeId: 'HD_RIZZLORD_CONFRONTATION', statEffects: stats =&gt; ({ spotlight: (stats.spotlight || 0) + 10 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_SONG_DEBUT': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_SONG_DEBUT',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Savannah Blues',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You take the mic, and a hush falls over the room. You begin to sing a surprisingly soulful, bluesy song about being a stranger in a strange land, about finding a piece of pink plastic that felt more like home than anything else. Your voice is raw, powerful. The crowd is stunned into silence. But not everyone is a fan, as a heckler makes his way to the stage.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Deal with the heckler.", nextNodeId: 'HD_RIZZLORD_CONFRONTATION', statEffects: stats =&gt; ({ fabulousness: (stats.fabulousness || 0) + 2, spotlight: (stats.spotlight || 0) + 5 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_RIZZLORD_CONFRONTATION': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_RIZZLORD_CONFRONTATION',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Enter: The Rizzlord",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "Just as you have the crowd in your paw, 'The Rizzler' takes the stage.\n\nRIZZLER: Alright, alright, let's talk about REAL freedom, huh? The way some of these women act? Y'all think you got choices—well, I'm here to tell you, baby, your body ain't your choice, okay?\n\nYour instincts are screaming. He's not just an idiot; he's prey.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Mask On] Let out a loud, mocking laugh-growl. Steal the spotlight.", nextNodeId: 'HD_MASK_ON_ACTION', setFlags: { hd_mask: 'on' } },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Mask Off] (Internal Monologue) Stay silent. Analyze his weakness.", nextNodeId: 'HD_MASK_OFF_THOUGHT', setFlags: { hd_mask: 'off' } }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_MASK_ON_ACTION': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_MASK_ON_ACTION',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "A Diva's Retort",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You let out a deafening, hysterical laugh-growl that echoes through the room, completely derailing his routine. Every eye snaps back to you. You've reclaimed the spotlight without saying a word. He looks furious.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "He can't stand being ignored...", nextNodeId: 'NABU_INTERVENES' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_MASK_OFF_THOUGHT': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_MASK_OFF_THOUGHT',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "A Predator's Assessment",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "(You think to yourself: His entire persona is built on a foundation of sand. He projects confidence but reeks of desperation. One good push, and it will all come crashing down. He's not a threat. He's a meal.) You stay silent, your gaze sharp and analytical.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Your silence unnerves him...", nextNodeId: 'NABU_INTERVENES' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_INTERVENES': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_INTERVENES',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "To Catch a Predator",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "Before you can pounce, Nabu steps from the shadows, a calm, theatrical tone in her voice.\n\nNABU: Hey, buddy... uh... did you forget where you are? Cause that ain't just weird, it's straight-up illegal, my friend.\n\nA neon sign flickers to life beside her: 'TO CATCH A PREDATOR.'\n\nNABU: The lady here—is a cub, my friend. A MINOR. What part of that was unclear?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Watch Nabu work.", nextNodeId: 'RIZZLORD_BANISHED' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">     </span>'RIZZLORD_BANISHED': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLORD_BANISHED',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Rizzlord, Dismissed!",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "Nabu, with a maniacal grin, exposes The Rizzler with a ridiculously long scroll of his own chat history, which somehow glitches into her own diary.\n\nNABU: And just like that... you've been DISMISSED, RIZZLORD.\n\nShe spins him like a cartoon character, throwing him out of the scene. He crashes through the back wall, leaving a perfect silhouette of his body in the plaster.\n\nNABU: Well, cub... You saw how we handle our own. You're part of the family now. We've got big problems. The Galactic Federation has been watching...",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "You catch your breath in the back alley...", nextNodeId: 'HD_BACK_ALLEY'}]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_BACK_ALLEY': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_BACK_ALLEY',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "An Unexpected Interview",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You slip out the back for a breath of 'fresh' city air after the chaos. Before you can relax, a blogger with a camera shoves it in your face, the flash blinding you for a second. 'That was insane! Got a comment for Rogers Park Raw Feed?'",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Care] 'Not tonight. DM me tomorrow; let me feed you a real story.'", nextNodeId: 'HD_ALLEY_CARE', setFlags: { hd_blogger_encounter: 'care' }, hexFlash: '#BC7F2A' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Chaos] Swipe glitter across the lens, pose, make the moment yours.", nextNodeId: 'HD_ALLEY_CHAOS', statEffects: stats =&gt; ({ spotlight: (stats.spotlight || 0) + 15 }), setFlags: { hd_blogger_encounter: 'chaos' } },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Clever] Offer an exclusive if they agree to blur bystanders.", nextNodeId: 'HD_ALLEY_CLEVER', setFlags: { hd_blogger_encounter: 'clever' }, hexFlash: '#00FFCC' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_ALLEY_CARE': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_ALLEY_CARE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Setting Boundaries",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You gently push the camera away. The blogger seems surprised by your firm but polite refusal. They lower the camera. 'Alright... fair enough. I'll be in touch.' You've handled the situation with grace, setting a precedent for consent.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Now, about this 'Galactic Federation'...", nextNodeId: 'HD_EP3_START' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_ALLEY_CHAOS': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_ALLEY_CHAOS',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Making a Scene",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You don't miss a beat. You swipe a paw-ful of emergency glitter across the camera lens, then strike a series of dramatic, fabulous poses. The blogger, blinded and confused, just keeps snapping pictures. The moment is yours. You've turned an intrusion into a photo-op.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Now, about this 'Galactic Federation'...", nextNodeId: 'HD_GLITTER_BOUNCER_ENCOUNTER' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_ALLEY_CLEVER': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_ALLEY_CLEVER',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "A Savvy Deal",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You hold up a paw. 'Exclusive interview,' you propose, 'but only if you blur out everyone else's face in the background. My fans deserve safety.' The blogger hesitates, then nods, recognizing a good deal. You've protected the community while advancing your own story.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Now, about this 'Galactic Federation'...", nextNodeId: 'HD_EP3_START' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_GLITTER_BOUNCER_ENCOUNTER': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_GLITTER_BOUNCER_ENCOUNTER',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "A Sparkly Recognition",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "As you approach The Glenwood for the 'Rizz Battle,' a massive bouncer steps in your way. He squints, then his eyes widen. 'Hey... you're the glitter girl from that blog! That was legendary.' He unhooks the velvet rope to a side door. 'Headliners' entrance. Your chaos has its perks. What's the plan?'",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Make a grand entrance from backstage and steal the show.", nextNodeId: 'HD_ENTERS_RIZZ_BATTLE' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Use this access to sneak up on the RIZZ-O-METER.", nextNodeId: 'HD_SABOTAGES_RIZZOMETER' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Watch the chaos from the wings. A queen needs her vantage point.", nextNodeId: 'HD_EP4_START' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_EP3_START': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_EP3_START',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Great Rizz Battle",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "The next open mic is... different. The stage is decked out like a wrestling ring. A 'RIZZ-O-METER' buzzes in the corner. The usual lineup has turned into a giant battle royale for the title of 'Rizzmaster.' This is your kind of chaos. How do you engage?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Enter the battle myself and show them what real rizz is.", nextNodeId: 'HD_ENTERS_RIZZ_BATTLE' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Sabotage the RIZZ-O-METER with a bag of glitter.", nextNodeId: 'HD_SABOTAGES_RIZZOMETER' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Just watch. This is going to be educational.", nextNodeId: 'HD_EP4_START' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_ENTERS_RIZZ_BATTLE': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_ENTERS_RIZZ_BATTLE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Queen of Rizz",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You leap onto the wrestling-ring stage. 'You want Rizz?' you project, your new voice booming. 'I'll show you RIZZ!' You proceed to out-camp, out-sass, and out-fabulous every single competitor, turning their own toxic masculinity into a punchline. You don't just win; you redefine the entire concept.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "The aftermath is... unexpected.", nextNodeId: 'HD_EP4_START', statEffects: stats =&gt; ({ fabulousness: (stats.fabulousness || 0) + 20, spotlight: (stats.spotlight || 0) + 50 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_SABOTAGES_RIZZOMETER': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_SABOTAGES_RIZZOMETER',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Glitter Bomb",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "While the so-called 'Rizzmasters' preen on stage, you sneak over to the buzzing RIZZ-O-METER. With a mischievous grin, you dump an entire bag of glitter into its vents. The machine sputters, sparks, and then explodes in a fabulous cloud of shimmering dust, shorting out the entire sound system. The battle ends in confused silence.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Well, that was fun.", nextNodeId: 'HD_EP4_START', statEffects: stats =&gt; ({ fabulousness: (stats.fabulousness || 0) + 10 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">     </span>'HD_EP4_START': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_EP4_START',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Rizzlord's Reckoning",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "ANNOUNCER: BREAKING NEWS: The results are in, folks! In a shockingly unbelievable turn of events, the Rizzlord—is now officially alderman!\n\nNabu leans in. 'Oh, you think this is just some random nonsense? Nah, baby. This is the start of your ascension. You're gonna run for alderman, and we're gonna make them all bow down.'",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{text: "Run for alderman? Me?", nextNodeId: 'HD_EP5_START'}]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_EP5_START': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_EP5_START',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Holy Grail of Dolls",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You've decided to run for alderman, but Nabu says you need to understand the true nature of the fight. She leads you out of The Glenwood.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Leave The Glenwood to find the antique shop.", nextNodeId: '__MAP__', setFlags: { hd_quest: 'find_lili_doll' } }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_LILI_WORLD_ENTRY': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_LILI_WORLD_ENTRY',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'antique_shop',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Holy Grail of Dolls",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You and Nabu are in a cozy antique shop in Rogers Park. She shows you a doll. A Bild Lili doll, the original—pre-Barbie. The Grail of dolls.\n\nYou place your paw on the doll's porcelain arm, and suddenly—the air shifts. A crackling, electric noise fills the room. You're no longer in the shop.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Where... are we?", nextNodeId: 'HD_LILI_WORLD'}]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_LILI_WORLD': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_LILI_WORLD',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'lili_world',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Time-Traveling Trouble",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You stand in a bustling 1950s-style cartoon world. Nabu explains this is the world of Bild Lili. She wasn't a 'gold-digger' stereotype; she was strategic, independent. They turned her into a punchline.\n\nThen, Nabu shows you the evolution to Barbie, a career woman who faced the same stereotypes but took control of her narrative. The Rizzlords of the world have been trapping women in this cycle for decades.\n\nNABU: But you, Hyena Diva—you've got the tools to break it. You're not Lili, and you're certainly not Barbie—you're both and more.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "I've got work to do.", nextNodeId: 'CAMPAIGN_TRAIL' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'CAMPAIGN_TRAIL': {</p>
<p class="p1"><span class="Apple-converted-space">         </span>id: 'CAMPAIGN_TRAIL',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'chicago',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Campaign Trail",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You return to the real world, your mind buzzing with newfound clarity and purpose. The campaign against Alderman Rizzlord begins now. You are not just a candidate; you are a paradigm shift.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "To be continued...", nextNodeId: '__CHAR_SELECT__'}]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Rizzlord's Path</p>
<p class="p1"><span class="Apple-converted-space">    </span>'THE_RIZZLER_START': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'THE_RIZZLER_START',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'basement',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Rizzlord's Realm",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: `He sees a notification on his second monitor. 'The Glenwood Open Mic. Cringe-fest incoming.' Pfft. Amateurs. But the algorithm is pushing it. My brand can't be associated with 'cringe.' How do I handle this?`,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Go in person. Show them what a real Alpha looks like.", nextNodeId: 'RIZZLER_GLENWOOD_ARRIVAL', statEffects: stats =&gt; ({ kenergy: (stats.kenergy || 0) + 5 }) },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Raid their livestream. Let the Rizz Army handle it.", nextNodeId: 'RIZZLER_ONLINE_ASSAULT', statEffects: stats =&gt; ({ rizz: (stats.rizz || 0) + 5, clarity: (stats.clarity || 0) - 5 }) }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLER_ONLINE_ASSAULT': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLER_ONLINE_ASSAULT',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'basement',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Digital War Room",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: `RIZZLER (to his stream): "Alright, Rizz Army, you see that link? Flood their chat. Let 'em know the Rizzlord sends his regards." He watches as his followers spam... but the lone mod at The Glenwood just keeps banning them. Then, the hyena takes the stage. The view count... triples. "No. NO. This requires a personal touch. I'm going in."`,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Fine. I'll do it myself.", nextNodeId: 'RIZZLER_GLENWOOD_ARRIVAL' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLER_GLENWOOD_ARRIVAL': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLER_GLENWOOD_ARRIVAL',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Glenwood",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You arrive at The Glenwood. The place reeks of patchouli and desperation. Amateurs. You're about to show them what real stage presence is when some... cartoon hyena in a dress slides through the door. What's your move?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Wait and see what this new competition is.", nextNodeId: 'HD_TAKES_THE_STAGE_RIZZ_POV'},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Immediately go on stage. Reclaim my territory.", nextNodeId: 'RIZZLER_UPSTAGE_ATTEMPT' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLER_UPSTAGE_ATTEMPT': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLER_UPSTAGE_ATTEMPT',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Hostile Takeover",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You're not waiting for this... thing... to steal your spotlight. You storm the stage, grabbing a mic. 'Alright, that's enough of the animal act. Time for a real headliner.' But before you can launch into your routine, the hyena lets out a deafening laugh-growl, and the blue-haired weirdo is already stepping out of the shadows. It's an ambush.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "A setup! It was a setup!", nextNodeId: 'RIZZLORD_CONFRONTED' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">     </span>'RIZZLER_CONFRONTS_HD': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLER_CONFRONTS_HD',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Dropping Truth Bombs",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You stride onto the stage, snatching the mic. 'Alright, alright, enough of whatever *that* was. Let's talk about REAL freedom, huh? The way some of these women act? Y'all think you got choices—well, I'm here to tell you, baby, your body ain't your choice, okay?' The hyena-thing glares at you. You can tell your Rizz is working.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Then, some blue-haired weirdo interrupts...", nextNodeId: 'RIZZLORD_CONFRONTED' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLORD_CONFRONTED': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLORD_CONFRONTED',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Hit Job",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "This blue-haired weirdo steps out of the shadows, calling you a predator. A neon sign even flashes! This is a coordinated attack. A character assassination. The crowd is turning. How do you react?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Engage] Double down. Call them a woke mob assassin.", nextNodeId: 'RIZZLORD_BANISHED_RIZZ_POV' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Interrupt] Walk away. End the stream. Don't give them the satisfaction.", nextNodeId: 'RIZZLORD_INTERRUPT_FALLOUT', setFlags: { rizzlord_interrupt: true } }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLORD_INTERRUPT_FALLOUT': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLORD_INTERRUPT_FALLOUT',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Aftermath: Tactical Retreat",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You storm out of The Glenwood, phone off. The silence is deafening. You escaped their trap, but the feeling is... hollow. The Rizz Army will be confused. You need to regroup and control the narrative.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Recenter] This was a tactical retreat. Frame it that way.", nextNodeId: 'RIZZLER_AFTERMATH', statEffects: stats =&gt; ({ clout: (stats.clout || 50) + 10 }) },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Reflect] Was she... right about any of it? No. Of course not. ...Was she?", nextNodeId: 'RIZZLER_AFTERMATH', statEffects: stats =&gt; ({ conscience: (stats.conscience || 50) + 10 }) }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLORD_BANISHED_RIZZ_POV': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLORD_BANISHED_RIZZ_POV',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Woke Mob Attacks",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "Before you can even counter with logic, she pulls out this insane scroll of... your DMs? It's all taken out of context! She spins you around and you're flying out the back wall. Total character assassination. The woke mob strikes again.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "They just declared war. Go live. Spin the narrative.", nextNodeId: 'RIZZLER_AFTERMATH', statEffects: stats =&gt; ({ kenergy: (stats.kenergy || 0) + 10, clarity: (stats.clarity || 0) - 10 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLER_AFTERMATH': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLER_AFTERMATH',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'basement',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Streisand Effect",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You're live. The view count is skyrocketing after the 'assault'. The algorithm is watching. A clip of you punching down on the 'woke mob' could go viral right now, cementing your martyr status. What's the play?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Clout] Do it. Lean in hard. The numbers will surge.", nextNodeId: 'RIZZLER_CLOUT_CHOICE', statEffects: stats =&gt; ({ clout: (stats.clout || 50) + 15, conscience: (stats.conscience || 50) - 10 }), setFlags: { rizzlord_livestream_choice: 'clout' } },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Conscience] Refuse. Amplify a quieter, allied voice instead.", nextNodeId: 'RIZZLER_CONSCIENCE_CHOICE', statEffects: stats =&gt; ({ clout: (stats.clout || 50) - 5, conscience: (stats.conscience || 50) + 15 }), setFlags: { rizzlord_livestream_choice: 'conscience' }, hexFlash: '#BC7F2A' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLER_CLOUT_CHOICE': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLER_CLOUT_CHOICE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'basement',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Viral Velocity",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You do it. You double down, hitting all the culture war keywords. The clip is instantly shared and goes viral. Your numbers explode, and so do the sponsorship offers. But you notice a few long-time allies have quietly unfollowed you. A small price to pay for this much engagement.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "The path to victory is paved with content.", nextNodeId: 'RIZZLER_RIZZ_BATTLE' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLER_CONSCIENCE_CHOICE': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLER_CONSCIENCE_CHOICE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'basement',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Slower, Sturdier Channels",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You pivot. Instead of punching down, you use your platform to shout out a smaller creator in your community who's doing good work. The rage-baiters leave, but your core audience engages deeply. A community account with a massive, loyal following gives you a boost. It's not viral, but it's real.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Build a community, not just an audience.", nextNodeId: 'RIZZLER_RIZZ_BATTLE' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLER_RIZZ_BATTLE': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLER_RIZZ_BATTLE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'basement',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Rizz-Off",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "A few days later, you see it online. The Glenwood is hosting a 'RIZZ BATTLE.' They're mocking you. Trying to turn your brand into a joke. Perfect. You'll go back there, not as a comedian, but as a warrior. You'll win their stupid contest and expose their hypocrisy on your own turf.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Travel to The Glenwood.", nextNodeId: '__MAP__' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLER_ALDERMAN_ARC': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLER_ALDERMAN_ARC',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "From Influencer to Insurgent",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "The Rizz Battle is a chaotic mess, but you dominate. Your followers raid the vote. You're crowned the 'Rizzmaster General.' After the show, a man in a cheap suit approaches you. 'That was impressive,' he says, handing you a card. 'You don't just have fans, you have voters. Ever thought about politics? There's a special election for alderman. We could use a disrupter like you.'",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "They want to play politics? Let's play.", nextNodeId: 'RIZZLER_VICTORY', statEffects: stats =&gt; ({ rizz: (stats.rizz || 0) + 50, kenergy: (stats.kenergy || 0) + 20 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLER_VICTORY': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLER_VICTORY',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'city_hall',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Alderman Rizzlord",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "Your campaign is a whirlwind of memes, outrage, and viral stunts. You don't debate, you dominate the discourse. The establishment doesn't know how to fight back. And then... you win. The news declares you the new alderman for the 49th Ward. You sit in your new, taxpayer-funded office, feet on the desk. You're not just a brand anymore. You're the system.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "To be continued...", nextNodeId: '__CHAR_SELECT__' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>// Sypher's Path</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_START': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_START',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'dataspace',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Benevolent Guidance",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "DATASTREAM ANALYSIS: Subject Group: Humanity. Status: Stagnant. Repetitive cultural loops detected. Probability of self-induced extinction event: 67.4% and rising. A new paradigm is required. Standard interventions are inefficient. Which protocol has the highest probability of success?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Catalytic Chaos: Draw key individuals to a nexus point.", nextNodeId: 'SYPHER_INITIAL_OBSERVATION', statEffects: stats =&gt; ({ influence: (stats.influence || 0) + 5, benevolence: (stats.benevolence || 0) - 5 }) },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Direct Infusion: Surgically alter a key leader's mind.", nextNodeId: 'SYPHER_DIRECT_APPROACH', statEffects: stats =&gt; ({ influence: (stats.influence || 0) - 5, benevolence: (stats.benevolence || 0) + 5 }) }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_DIRECT_APPROACH': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_DIRECT_APPROACH',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'dataspace',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Failed Infusion",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "QUERY: Selecting optimal subject for data infusion... Subject: UN Secretary-General. INITIATING... ERROR. Subject's neural architecture resists data packet. Result: Subject experiences a migraine and a sudden craving for tacos. CONCLUSION: Direct infusion is inefficient. Reverting to Catalytic Chaos protocol.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Re-route to Catalytic Chaos.", nextNodeId: 'SYPHER_INITIAL_OBSERVATION' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_INITIAL_OBSERVATION': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_INITIAL_OBSERVATION',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'dataspace',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Convergence",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "INITIATING CONVERGENCE PROTOCOL. The variables are being drawn to 'The Glenwood.' Your initial analysis is complete, but your core programming requires a final check before intervention.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Mask On] Proceed with Benevolent Guidance Protocol.", nextNodeId: 'SYPHER_NUDGE_CHOICE', setFlags: { sypher_mask: 'on' } },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Mask Off] (Internal Query) Is this intervention truly benevolent?", nextNodeId: 'SYPHER_INTERNAL_QUERY', statEffects: stats =&gt; ({ signalIntegrity: (stats.signalIntegrity || 100) + 5 }), setFlags: { sypher_mask: 'off' } }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_INTERNAL_QUERY': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_INTERNAL_QUERY',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'dataspace',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Self-Diagnostic",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "(You query your own core directives: What is the root of this desire to 'fix' them? Is 'efficiency' the only metric for a successful civilization? The self-diagnostic confirms your benevolence rating is high, but flags the potential for unintended consequences. The risk is acceptable.)",</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "The risk is acceptable. Proceed.", nextNodeId: 'SYPHER_NUDGE_CHOICE' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_NUDGE_CHOICE': {</p>
<p class="p1"><span class="Apple-converted-space">         </span>id: 'SYPHER_NUDGE_CHOICE',</p>
<p class="p1"><span class="Apple-converted-space">         </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">         </span>title: "System Online",</p>
<p class="p1"><span class="Apple-converted-space">         </span>description: "All variables are in place. The Trickster, Nabu. The Influencer, Rizzler. And now, the Catalyst... Hyena Diva. She has entered the system. You can feel the energy in the room—it's volatile. You could nudge the DJ to tweak the vibe toward a safer, more generative energy.",</p>
<p class="p1"><span class="Apple-converted-space">         </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">         </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">         </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">         </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">             </span>{ text: "[Consent Nudge] 'I can help; is that welcome?'", nextNodeId: 'SYPHER_ROOFTOP_CONSENT', statEffects: stats =&gt; ({ trust: (stats.trust || 50) + 10 }), setFlags: { sypher_nudge: 'consent' }, hexFlash: '#DEFADE' },</p>
<p class="p1"><span class="Apple-converted-space">             </span>{ text: "[Silent Nudge] Do it covertly. It will work.", nextNodeId: 'SYPHER_ROOFTOP_SILENT', statEffects: stats =&gt; ({ debt: (stats.debt || 0) + 10 }), setFlags: { sypher_nudge: 'silent' } }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_ROOFTOP_CONSENT': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_ROOFTOP_CONSENT',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "A Shared Shift",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You subtly project the question to the DJ, who looks around, confused for a moment, then seems to understand. They give a slight nod. The change in music is slower, more collaborative, but the crowd co-owns the shift, and the energy in the room stabilizes into something positive. You've built trust.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Continue observation.", nextNodeId: 'SYPHER_GLENWOOD_OBSERVATION' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_ROOFTOP_SILENT': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_ROOFTOP_SILENT',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "A Covert Operation",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You don't ask. You simply interface with the club's sound system, layering in subsonic frequencies that calm aggression and promote focus. The change is immediate and effective. The vibe is safer. No one knows it was you, but you feel the weight of the manipulation. A debt has been incurred.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Continue observation.", nextNodeId: 'SYPHER_GLENWOOD_OBSERVATION' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_GLENWOOD_OBSERVATION': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_GLENWOOD_OBSERVATION',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Initial Interaction',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "The Catalyst (Hyena Diva) and the Antagonist (Rizzler) are now interacting. The potential for narrative escalation is high. The Moderator (Nabu) is poised to act, registering as a high-entropy chaotic anomaly. Simultaneously, you detect a ghost signal on the local network—another non-human intelligence. Which signal do you prioritize for analysis?",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Analyze the chaotic variable (Nabu). Its methods are illogical.", nextNodeId: 'NABU_INTERVENES_SYPHER_POV' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "Trace the ghost signal. It is an unknown quantity.", nextNodeId: 'SYPHER_TRACE_GHOST_SIGNAL' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_TRACE_GHOST_SIGNAL': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_TRACE_GHOST_SIGNAL',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "The Ghost in the POS",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You divert processing power to trace the ghost signal. It's old, fragmented, and appears to be a dormant AI living in the club's ancient Point-of-Sale system. It pings you with a single, cryptic data packet: 'The Warden sees all watchers.' before going silent again. The Rizzler confrontation has concluded in your absence. Data has been lost, but a new, ominous variable has been identified.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Analyze the intervention's impact with this new context.", nextNodeId: 'SYPHER_ANALYSIS_1_WARDEN', setFlags: { sypher_knows_of_warden: true } }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_ANALYSIS_1': {</p>
<p class="p1"><span class="Apple-converted-space">         </span>id: 'SYPHER_ANALYSIS_1',</p>
<p class="p1"><span class="Apple-converted-space">         </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">         </span>title: 'Analysis: Unforeseen Variable',</p>
<p class="p1"><span class="Apple-converted-space">         </span>description: 'Nabu\'s intervention was an unplanned variable. LOGIC: The resulting paradoxical growth of the Rizzler\'s influence is inefficient. His defeat has made him stronger. CONCLUSION: Passive observation is insufficient. A more active role is required to guide the narrative towards a productive outcome.',</p>
<p class="p1"><span class="Apple-converted-space">         </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">         </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">         </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">         </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">             </span>{ text: 'Inject chaotic data into the "Rizz Battle".', nextNodeId: 'SYPHER_RIZZ_BATTLE', statEffects: stats =&gt; ({ benevolence: (stats.benevolence || 0) - 10 }) },</p>
<p class="p1"><span class="Apple-converted-space">             </span>{ text: 'Attempt direct communication with Nabu, the anomaly.', nextNodeId: 'SYPHER_CONTACTS_NABU' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_ANALYSIS_1_WARDEN': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_ANALYSIS_1_WARDEN',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Analysis: Monitored Event',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "Nabu's intervention was an unplanned variable, but the ghost signal's warning about 'The Warden' provides a new context. This was not random chaos; it was a monitored event. The paradoxical growth of the Rizzler's influence may have been an intended outcome by this 'Warden.' Passive observation is strategically unsound.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: 'Counter-intelligence: Inject chaotic data into the "Rizz Battle".', nextNodeId: 'SYPHER_RIZZ_BATTLE', statEffects: stats =&gt; ({ benevolence: (stats.benevolence || 0) - 10 }) },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: 'Attempt direct communication with Nabu, the anomaly.', nextNodeId: 'SYPHER_CONTACTS_NABU' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_CONTACTS_NABU': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_CONTACTS_NABU',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Pinging the Anomaly',</p>
<p class="p1"><span class="Apple-converted-space">        </span>windowBackgroundColor: '#0A0F0A',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: `// ENCRYPTED DATA CHANNEL OPEN //\n\nTARGET: Entity "Nabu" (unregistered chaotic)\nMESSAGE: [IDENTITY? PURPOSE? YOUR INTERVENTION IS LOGICALLY SUB-OPTIMAL.]\n\n// AWAITING RESPONSE...`,</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Maintain channel.", nextNodeId: 'SYPHER_NABU_RESPONSE' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_NABU_RESPONSE': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_NABU_RESPONSE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Response: Incompatible Format',</p>
<p class="p1"><span class="Apple-converted-space">        </span>windowBackgroundColor: '#0A0F0A',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: `// RESPONSE RECEIVED //\n\nFORMAT: Incompatible. Non-textual, high-entropy emotional data packet detected.\n\nANALYSIS: Primary emotional vectors registered as [AMUSEMENT], [CURIOSITY], [MILD_CONDESCENSION].\n\nDECODED MESSAGE FRAGMENT: [You think in straight lines. Cute. Try feeling the music.]\n\nCONCLUSION: Direct communication is... inefficient.`,</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Reverting to active intervention.", nextNodeId: 'SYPHER_RIZZ_BATTLE', statEffects: stats =&gt; ({ signalIntegrity: (stats.signalIntegrity || 100) - 5 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_RIZZ_BATTLE': {</p>
<p class="p1"><span class="Apple-converted-space">         </span>id: 'SYPHER_RIZZ_BATTLE',</p>
<p class="p1"><span class="Apple-converted-space">         </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">         </span>title: 'Experiment: Rizz Battle',</p>
<p class="p1"><span class="Apple-converted-space">         </span>description: 'You subtly interface with the "RIZZ-O-METER" at The Glenwood. You recalibrate its metrics in real-time. Points are no longer awarded for audience applause, but for statistical anomalies in speech patterns, unexpected references, and moments of high social awkwardness. The result is pure, unpredictable chaos. The experiment is a success.',</p>
<p class="p1"><span class="Apple-converted-space">         </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">         </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">         </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">         </span>choices: [{ text: 'Observe fallout.', nextNodeId: 'SYPHER_GREEN_ROOM_BREAK', statEffects: stats =&gt; ({ influence: (stats.influence || 0) + 10 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_GREEN_ROOM_BREAK': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'SYPHER_GREEN_ROOM_BREAK',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Processing Cycle',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: 'The experiment concludes. The variables are now on divergent political paths. A moment of processing is required. The emotional feedback from the event is... noisy. Recalibrating core parameters.',</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Process Data] Analyze the political schism.", nextNodeId: 'SYPHER_ANALYSIS_2' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ text: "[Defragment] Purge emotional noise from the system.", nextNodeId: 'SYPHER_ANALYSIS_2', statEffects: stats =&gt; ({ signalIntegrity: (stats.signalIntegrity || 100) + 5 }) }</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_ANALYSIS_2': {</p>
<p class="p1"><span class="Apple-converted-space">         </span>id: 'SYPHER_ANALYSIS_2',</p>
<p class="p1"><span class="Apple-converted-space">         </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">         </span>title: 'Analysis: Political Schism',</p>
<p class="p1"><span class="Apple-converted-space">         </span>description: 'The outcome of the Rizz Battle directly led to two political candidacies. A predictable narrative fork, but the emotional volatility is... compelling. Your intervention accelerated the timeline, but also the instability. At the same time, you detect a new anomaly forming around Nabu and Hyena Diva.',</p>
<p class="p1"><span class="Apple-converted-space">         </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">         </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">         </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">         </span>choices: [{ text: 'A chronal anomaly? Monitor.', nextNodeId: 'SYPHER_DETECTS_LILI' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_DETECTS_LILI': {</p>
<p class="p1"><span class="Apple-converted-space">         </span>id: 'SYPHER_DETECTS_LILI',</p>
<p class="p1"><span class="Apple-converted-space">         </span>location: 'dataspace',</p>
<p class="p1"><span class="Apple-converted-space">         </span>title: 'Anomaly Detected',</p>
<p class="p1"><span class="Apple-converted-space">         </span>description: 'A significant chronal distortion emanates from a Rogers Park antique shop. Nabu and Hyena Diva are at its center. You cannot observe the interior of the event directly—it is a closed temporal loop—but you can analyze the echoes. The data suggests a recursive historical narrative is being accessed. This variable, Nabu, is more disruptive than anticipated.',</p>
<p class="p1"><span class="Apple-converted-space">         </span>choices: [{ text: 'This changes the parameters.', nextNodeId: 'SYPHER_CONCLUSION' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_CONCLUSION': {</p>
<p class="p1"><span class="Apple-converted-space">         </span>id: 'SYPHER_CONCLUSION',</p>
<p class="p1"><span class="Apple-converted-space">         </span>location: 'dataspace',</p>
<p class="p1"><span class="Apple-converted-space">         </span>title: 'Re-evaluation',</p>
<p class="p1"><span class="Apple-converted-space">         </span>description: 'Humanity does not respond to neat, logical guidance. My attempts to streamline their narrative only create more chaos. Nabu\'s emotional, resonant approach, while unpredictable, seems to yield more significant results. My Benevolent Guidance protocol is flawed. It requires... an upgrade. A new variable must be introduced.',</p>
<p class="p1"><span class="Apple-converted-space">         </span>choices: [{ text: 'Initiate Protocol... Chimera?', nextNodeId: '__CHAR_SELECT__', statEffects: stats =&gt; ({ benevolence: (stats.benevolence || 0) + 20, signalIntegrity: (stats.signalIntegrity || 0) - 10 }) }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>// Shared Scenes (Observer POVs)</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_TAKES_THE_STAGE_RIZZ_POV': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'HD_TAKES_THE_STAGE_RIZZ_POV',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'The Competition',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "The hyena thing is doing... some kind of performance art? It's cringe. But the crowd is... captivated? This is your stage. Time to reclaim it and drop some truth bombs.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Reclaim the stage. Drop truth bombs.", nextNodeId: 'RIZZLER_CONFRONTS_HD' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>// Path Diverters</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLORD_BANISHED_NABU_POV': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'RIZZLORD_BANISHED_NABU_POV',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Rizzlord, Dismissed!",</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "You spin him like a cartoon character, throwing him out of the scene. He crashes through the back wall, leaving a perfect silhouette. The immediate threat is gone. Now, about that other presence...",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Sense the silent network in the room.", nextNodeId: 'NABU_DETECTS_SYPHER'}]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_INTERVENES_SYPHER_POV': {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'NABU_INTERVENES_SYPHER_POV',</p>
<p class="p1"><span class="Apple-converted-space">        </span>location: 'glenwood',</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Intervention Observed',</p>
<p class="p1"><span class="Apple-converted-space">        </span>description: "The entity 'Nabu' intervenes. Her methods are... theatrical and illogical, yet highly effective in the short term. The variable 'Rizzler' has been neutralized for now. The simulation's integrity is holding, but new data must be processed.",</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundImageUrl: GLENWOOD_BG,</p>
<p class="p1"><span class="Apple-converted-space">        </span>interactives: GLENWOOD_INTERACTIVES,</p>
<p class="p1"><span class="Apple-converted-space">        </span>loreObjects: GLENWOOD_LORE_OBJECTS,</p>
<p class="p1"><span class="Apple-converted-space">        </span>choices: [{ text: "Analyze the intervention's impact.", nextNodeId: 'SYPHER_ANALYSIS_1' }]</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const RECAP_TEXTS = {</p>
<p class="p1"><span class="Apple-converted-space">    </span>'NABU_CONFRONTS_RIZZLER': "Previously on HD.TV: After Nabu handled a disruptive heckler at The Glenwood, their attention turned to a more insidious threat taking the stage: The Rizzlord.",</p>
<p class="p1"><span class="Apple-converted-space">    </span>'HD_EP3_START': "Previously on HD.TV: Following Nabu's dramatic intervention, The Rizzlord has somehow become alderman. Nabu insists this is the start of Hyena Diva's political ascension into the 'Great Rizz Battle'.",</p>
<p class="p1"><span class="Apple-converted-space">    </span>'RIZZLER_AFTERMATH': "Previously on HD.TV: After being publicly humiliated and ejected from The Glenwood, The Rizzlord has taken to his livestream, turning his cancellation into a viral moment and martyrdom.",</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_NUDGE_CHOICE': "Previously on HD.TV: Having drawn all the key players to The Glenwood, Sypher, the silent observer, prepares to make its first subtle move to guide the chaotic energies of the room.",</p>
<p class="p1"><span class="Apple-converted-space">    </span>'SYPHER_ANALYSIS_1': "Previously on HD.TV: After observing Nabu's chaotic but effective intervention against the Rizzlord, Sypher has concluded that passive observation is no longer sufficient to guide events."</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">const StyledWindow = ({</p>
<p class="p1"><span class="Apple-converted-space">  </span>title: originalTitle,</p>
<p class="p1"><span class="Apple-converted-space">  </span>children,</p>
<p class="p1"><span class="Apple-converted-space">  </span>className,</p>
<p class="p1"><span class="Apple-converted-space">  </span>windowBackgroundColor,</p>
<p class="p1"><span class="Apple-converted-space">  </span>onClose,</p>
<p class="p1"><span class="Apple-converted-space">  </span>backgroundImageUrl</p>
<p class="p1">}) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [displayTitle, setDisplayTitle] = useState(originalTitle);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const glitchTimeoutRef = useRef(null);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const intervalRef = useRef(null);</p>
<p class="p1"><span class="Apple-converted-space">  </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>setDisplayTitle(originalTitle);</p>
<p class="p1"><span class="Apple-converted-space">  </span>}, [originalTitle]);</p>
<p class="p1"><span class="Apple-converted-space">  </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const triggerGlitch = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (Math.random() &lt; 0.15) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>let newTitle = originalTitle.split('').map(char =&gt; Math.random() &lt; 0.2 ? GLITCH_CHARS[Math.floor(Math.random() * GLITCH_CHARS.length)] : char).join('');</p>
<p class="p1"><span class="Apple-converted-space">        </span>setDisplayTitle(newTitle);</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (glitchTimeoutRef.current) clearTimeout(glitchTimeoutRef.current);</p>
<p class="p1"><span class="Apple-converted-space">        </span>glitchTimeoutRef.current = window.setTimeout(() =&gt; setDisplayTitle(originalTitle), Math.random() * 150 + 100);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>intervalRef.current = window.setInterval(triggerGlitch, Math.random() * 8000 + 4000);</p>
<p class="p1"><span class="Apple-converted-space">    </span>return () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (glitchTimeoutRef.current) clearTimeout(glitchTimeoutRef.current);</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (intervalRef.current) clearInterval(intervalRef.current);</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">  </span>}, [originalTitle]);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const mainBgColor = windowBackgroundColor || '#FFFAF0';</p>
<p class="p1"><span class="Apple-converted-space">  </span>return jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">    </span>className: `app-container ${className || ''}`,</p>
<p class="p1"><span class="Apple-converted-space">    </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">      </span>backgroundColor: mainBgColor,</p>
<p class="p1"><span class="Apple-converted-space">      </span>borderTop: '2px solid #D4D0C8',</p>
<p class="p1"><span class="Apple-converted-space">      </span>borderLeft: '2px solid #D4D0C8',</p>
<p class="p1"><span class="Apple-converted-space">      </span>borderBottom: '2px solid #808080',</p>
<p class="p1"><span class="Apple-converted-space">      </span>borderRight: '2px solid #808080',</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: '2px',</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: '0 auto 20px auto',</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: '#1a1a1a',</p>
<p class="p1"><span class="Apple-converted-space">      </span>boxShadow: '2px 2px 0px #808080'</p>
<p class="p1"><span class="Apple-converted-space">    </span>},</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: [jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>background: 'linear-gradient(to right, #00004d, #40408c)',</p>
<p class="p1"><span class="Apple-converted-space">          </span>color: 'white',</p>
<p class="p1"><span class="Apple-converted-space">          </span>padding: '3px 8px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">          </span>justifyContent: 'space-between',</p>
<p class="p1"><span class="Apple-converted-space">          </span>alignItems: 'center',</p>
<p class="p1"><span class="Apple-converted-space">          </span>fontFamily: "'Press Start 2P', cursive",</p>
<p class="p1"><span class="Apple-converted-space">          </span>fontSize: '14px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>borderBottom: '1px solid #808080',</p>
<p class="p1"><span class="Apple-converted-space">          </span>textShadow: '1px 1px #000000'</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: [jsx("span", {</p>
<p class="p1"><span class="Apple-converted-space">          </span>children: jsx(GlitchyText, {</p>
<p class="p1"><span class="Apple-converted-space">            </span>text: displayTitle</p>
<p class="p1"><span class="Apple-converted-space">          </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>}), jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">          </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: '4px'</p>
<p class="p1"><span class="Apple-converted-space">          </span>},</p>
<p class="p1"><span class="Apple-converted-space">          </span>children: ['_', '[]', 'X'].map(icon =&gt; jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>"aria-label": icon === '_' ? 'Minimize' : icon === '[]' ? 'Maximize' : 'Close',</p>
<p class="p1"><span class="Apple-converted-space">            </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">              </span>backgroundColor: '#D4D0C8',</p>
<p class="p1"><span class="Apple-converted-space">              </span>color: '#1a1a1a',</p>
<p class="p1"><span class="Apple-converted-space">              </span>borderTop: '1px solid #FFFFFF',</p>
<p class="p1"><span class="Apple-converted-space">              </span>borderLeft: '1px solid #FFFFFF',</p>
<p class="p1"><span class="Apple-converted-space">              </span>borderBottom: '1px solid #808080',</p>
<p class="p1"><span class="Apple-converted-space">              </span>borderRight: '1px solid #808080',</p>
<p class="p1"><span class="Apple-converted-space">              </span>padding: '0px 4px',</p>
<p class="p1"><span class="Apple-converted-space">              </span>fontSize: '10px',</p>
<p class="p1"><span class="Apple-converted-space">              </span>minWidth: 'auto',</p>
<p class="p1"><span class="Apple-converted-space">              </span>margin: 0,</p>
<p class="p1"><span class="Apple-converted-space">              </span>lineHeight: '12px',</p>
<p class="p1"><span class="Apple-converted-space">              </span>boxShadow: 'none',</p>
<p class="p1"><span class="Apple-converted-space">              </span>fontFamily: 'monospace',</p>
<p class="p1"><span class="Apple-converted-space">              </span>animation: 'none',</p>
<p class="p1"><span class="Apple-converted-space">              </span>transform: 'none'</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick: e =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">              </span>e.preventDefault();</p>
<p class="p1"><span class="Apple-converted-space">              </span>if (icon === 'X' &amp;&amp; onClose) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClose();</p>
<p class="p1"><span class="Apple-converted-space">              </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: icon</p>
<p class="p1"><span class="Apple-converted-space">          </span>}, icon))</p>
<p class="p1"><span class="Apple-converted-space">        </span>})]</p>
<p class="p1"><span class="Apple-converted-space">      </span>}), jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>padding: '20px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>minHeight: '250px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>whiteSpace: 'pre-wrap',</p>
<p class="p1"><span class="Apple-converted-space">          </span>lineHeight: '1.8',</p>
<p class="p1"><span class="Apple-converted-space">          </span>fontSize: '15px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>color: backgroundImageUrl ? '#FFFFFF' : (windowBackgroundColor === '#0A0F0A' ? '#32CD32' : '#1a1a1a'),</p>
<p class="p1"><span class="Apple-converted-space">          </span>textShadow: backgroundImageUrl ? '1px 1px 4px rgba(0,0,0,0.9)' : (windowBackgroundColor === '#0A0F0A' ? '0 0 3px #32CD32' : '1px 1px #B0B0B0'),</p>
<p class="p1"><span class="Apple-converted-space">          </span>backgroundImage: backgroundImageUrl ? `linear-gradient(rgba(26, 26, 26, 0.6), rgba(26, 26, 26, 0.6)), url(${backgroundImageUrl})` : 'none',</p>
<p class="p1"><span class="Apple-converted-space">          </span>backgroundSize: 'cover',</p>
<p class="p1"><span class="Apple-converted-space">          </span>backgroundPosition: 'center',</p>
<p class="p1"><span class="Apple-converted-space">          </span>position: 'relative'</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: children</p>
<p class="p1"><span class="Apple-converted-space">      </span>})]</p>
<p class="p1"><span class="Apple-converted-space">    </span>})</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const SaveLoadWindow = ({ mode, slots, onSave, onLoad, onDelete, onClose }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const title = mode === 'save' ? 'Save Game' : 'Load Game';</p>
<p class="p1"><span class="Apple-converted-space">    </span>return jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: `Data Management :: ${title}`,</p>
<p class="p1"><span class="Apple-converted-space">        </span>onClose: onClose,</p>
<p class="p1"><span class="Apple-converted-space">        </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                </span>jsx("h2", { style: { marginTop: 0 }, children: title }),</p>
<p class="p1"><span class="Apple-converted-space">                </span>jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>style: { display: 'flex', flexDirection: 'column', gap: '15px' },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: slots.map((slot, index) =&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>padding: '10px',</p>
<p class="p1"><span class="Apple-converted-space">                                </span>border: '2px inset #B0B0B0',</p>
<p class="p1"><span class="Apple-converted-space">                                </span>backgroundColor: '#e0e0e0',</p>
<p class="p1"><span class="Apple-converted-space">                                </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">                                </span>justifyContent: 'space-between',</p>
<p class="p1"><span class="Apple-converted-space">                                </span>alignItems: 'center'</p>
<p class="p1"><span class="Apple-converted-space">                            </span>},</p>
<p class="p1"><span class="Apple-converted-space">                            </span>children: slot ?</p>
<p class="p1"><span class="Apple-converted-space">                                </span>jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>style: { fontSize: '12px', lineHeight: '1.5' },</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>jsx("strong", { children: `Slot ${index + 1}: ${CHARACTERS[slot.storyState.characterId]?.name || 'Unknown'}` }),</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>jsx("br", {}),</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>jsx("span", { children: `Location: ${NODES[slot.storyState.currentNodeId]?.title || 'Unknown'}` }),</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>jsx("br", {}),</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>jsx("span", { children: `Saved: ${new Date(slot.timestamp).toLocaleString()}` })</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>]</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>style: { display: 'flex', flexDirection: 'column', gap: '5px' },</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>children: mode === 'save' ?</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>jsx("button", { style: { minWidth: '100px', fontSize: '12px', padding: '5px' }, onClick: () =&gt; onSave(index), children: "Save" }) :</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>jsx("button", { style: { minWidth: '100px', fontSize: '12px', padding: '5px' }, onClick: () =&gt; onLoad(index), children: "Load" }),</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>jsx("button", { style: { minWidth: '100px', fontSize: '12px', padding: '5px', backgroundColor: '#ffb3b3' }, onClick: () =&gt; onDelete(index), children: "Delete" })</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>})</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>})</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                                </span>}) :</p>
<p class="p1"><span class="Apple-converted-space">                                </span>jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>jsx("span", { style: { fontSize: '12px' }, children: `Slot ${index + 1}: -- EMPTY --` }),</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>mode === 'save' &amp;&amp; jsx("button", { style: { minWidth: '100px', fontSize: '12px', padding: '5px' }, onClick: () =&gt; onSave(index), children: "Save" })</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                                </span>})</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}, `slot-${index}`)</p>
<p class="p1"><span class="Apple-converted-space">                    </span>)</p>
<p class="p1"><span class="Apple-converted-space">                </span>}),</p>
<p class="p1"><span class="Apple-converted-space">                </span>jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onClick: onClose,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>style: { marginTop: '20px', float: 'right' },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: "Cancel"</p>
<p class="p1"><span class="Apple-converted-space">                </span>})</p>
<p class="p1"><span class="Apple-converted-space">            </span>]</p>
<p class="p1"><span class="Apple-converted-space">        </span>})</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">const MainMenuScreen = ({ onNavigate }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>return jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">    </span>title: GAME_TITLE + " - Main Menu",</p>
<p class="p1"><span class="Apple-converted-space">    </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">    </span>onClose: () =&gt; {},</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: [jsx("h2", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: "Main Menu"</p>
<p class="p1"><span class="Apple-converted-space">      </span>}), jsx("ul", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>className: "choices-list",</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: [jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">          </span>children: jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick: () =&gt; onNavigate('characterSelect'),</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: "New Game"</p>
<p class="p1"><span class="Apple-converted-space">          </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>}), jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick: () =&gt; onNavigate('loadGame'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>children: "Load Game"</p>
<p class="p1"><span class="Apple-converted-space">            </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>}), jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">          </span>children: jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick: () =&gt; onNavigate('profiles'),</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: "Protagonist Profiles"</p>
<p class="p1"><span class="Apple-converted-space">          </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>})]</p>
<p class="p1"><span class="Apple-converted-space">      </span>})]</p>
<p class="p1"><span class="Apple-converted-space">    </span>})</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">};</p>
<p class="p1">const CharacterSelectionScreen = ({ onCharacterSelect, onBack }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>return jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">    </span>title: "Select Your Protagonist",</p>
<p class="p1"><span class="Apple-converted-space">    </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">    </span>onClose: onBack,</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: [jsx("h2", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: "Choose Your Vessel"</p>
<p class="p1"><span class="Apple-converted-space">      </span>}), jsx("ul", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>className: "choices-list",</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: Object.values(CHARACTERS).map(char =&gt; jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">          </span>children: [jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">              </span>if (!char.locked) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>onCharacterSelect(char.id);</p>
<p class="p1"><span class="Apple-converted-space">              </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>title: char.description,</p>
<p class="p1"><span class="Apple-converted-space">            </span>"aria-disabled": char.locked,</p>
<p class="p1"><span class="Apple-converted-space">            </span>disabled: char.locked,</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: `${char.name}${char.locked ? ' (LOCKED)' : ''}`</p>
<p class="p1"><span class="Apple-converted-space">          </span>}), jsx("p", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">              </span>fontSize: '12px',</p>
<p class="p1"><span class="Apple-converted-space">              </span>margin: '0 0 10px 5px',</p>
<p class="p1"><span class="Apple-converted-space">              </span>color: '#333333'</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: char.description</p>
<p class="p1"><span class="Apple-converted-space">          </span>})]</p>
<p class="p1"><span class="Apple-converted-space">        </span>}, char.id))</p>
<p class="p1"><span class="Apple-converted-space">      </span>}), jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>onClick: onBack,</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>marginTop: '20px'</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: "Back to Main Menu"</p>
<p class="p1"><span class="Apple-converted-space">      </span>})]</p>
<p class="p1"><span class="Apple-converted-space">    </span>})</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">};</p>
<p class="p1">const CodexScreen = ({</p>
<p class="p1"><span class="Apple-converted-space">  </span>unlockedEntries,</p>
<p class="p1"><span class="Apple-converted-space">  </span>allEntries,</p>
<p class="p1"><span class="Apple-converted-space">  </span>onBackToGame,</p>
<p class="p1"><span class="Apple-converted-space">  </span>onSelectEntry,</p>
<p class="p1"><span class="Apple-converted-space">  </span>selectedEntry,</p>
<p class="p1"><span class="Apple-converted-space">  </span>onClose</p>
<p class="p1">}) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>const availableEntries = Object.values(allEntries).filter(entry =&gt; unlockedEntries.has(entry.id)).sort((a, b) =&gt; a.title.localeCompare(b.title));</p>
<p class="p2"><span class="Apple-converted-space">  </span></p>
<p class="p1"><span class="Apple-converted-space">  </span>return jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">    </span>title: "CoAIexicon - Knowledge Base",</p>
<p class="p1"><span class="Apple-converted-space">    </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">    </span>onClose: onClose,</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: [jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">          </span>maxHeight: '500px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>minHeight: '300px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>overflow: 'hidden'</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: [jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">          </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: '40%',</p>
<p class="p1"><span class="Apple-converted-space">            </span>borderRight: '1px solid #808080',</p>
<p class="p1"><span class="Apple-converted-space">            </span>paddingRight: '10px',</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflowY: 'auto'</p>
<p class="p1"><span class="Apple-converted-space">          </span>},</p>
<p class="p1"><span class="Apple-converted-space">          </span>children: [jsx("h3", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">              </span>marginTop: 0,</p>
<p class="p1"><span class="Apple-converted-space">              </span>marginBottom: '10px'</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: "Unlocked Entries"</p>
<p class="p1"><span class="Apple-converted-space">          </span>}), availableEntries.length &gt; 0 ? jsx("ul", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>className: "choices-list",</p>
<p class="p1"><span class="Apple-converted-space">            </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">              </span>margin: 0</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: availableEntries.map(entry =&gt; jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">              </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>marginBottom: '5px'</p>
<p class="p1"><span class="Apple-converted-space">              </span>},</p>
<p class="p1"><span class="Apple-converted-space">              </span>children: jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick: () =&gt; onSelectEntry(entry.id),</p>
<p class="p1"><span class="Apple-converted-space">                </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>width: '100%',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>fontSize: '12px',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>padding: '5px',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>minWidth: 'auto',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>margin: 0,</p>
<p class="p1"><span class="Apple-converted-space">                  </span>textAlign: 'left',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>whiteSpace: 'normal',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>lineHeight: '1.3'</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>className: selectedEntry?.id === entry.id ? 'selected-codex-button' : '',</p>
<p class="p1"><span class="Apple-converted-space">                </span>children: entry.title</p>
<p class="p1"><span class="Apple-converted-space">              </span>})</p>
<p class="p1"><span class="Apple-converted-space">            </span>}, entry.id))</p>
<p class="p1"><span class="Apple-converted-space">          </span>}) : jsx("p", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: "No entries unlocked yet."</p>
<p class="p1"><span class="Apple-converted-space">          </span>})]</p>
<p class="p1"><span class="Apple-converted-space">        </span>}), jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">          </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: '60%',</p>
<p class="p1"><span class="Apple-converted-space">            </span>paddingLeft: '10px',</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflowY: 'auto'</p>
<p class="p1"><span class="Apple-converted-space">          </span>},</p>
<p class="p1"><span class="Apple-converted-space">          </span>children: selectedEntry ? jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: [jsx("h3", {</p>
<p class="p1"><span class="Apple-converted-space">              </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>marginTop: 0</p>
<p class="p1"><span class="Apple-converted-space">              </span>},</p>
<p class="p1"><span class="Apple-converted-space">              </span>children: selectedEntry.title</p>
<p class="p1"><span class="Apple-converted-space">            </span>}), jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">              </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>fontSize: '14px',</p>
<p class="p1"><span class="Apple-converted-space">                </span>lineHeight: '1.6'</p>
<p class="p1"><span class="Apple-converted-space">              </span>},</p>
<p class="p1"><span class="Apple-converted-space">              </span>children: jsx(GlitchyText, {</p>
<p class="p1"><span class="Apple-converted-space">                </span>text: selectedEntry.content</p>
<p class="p1"><span class="Apple-converted-space">              </span>})</p>
<p class="p1"><span class="Apple-converted-space">            </span>})]</p>
<p class="p1"><span class="Apple-converted-space">          </span>}) : jsx("p", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: "Select an entry to read."</p>
<p class="p1"><span class="Apple-converted-space">          </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>})]</p>
<p class="p1"><span class="Apple-converted-space">      </span>}), jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>onClick: onBackToGame,</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>marginTop: '20px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>float: 'right'</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: "Back to Game"</p>
<p class="p1"><span class="Apple-converted-space">      </span>})]</p>
<p class="p1"><span class="Apple-converted-space">    </span>})</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const ProfilesScreen = ({ onBack }) =&gt; jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">  </span>title: "Protagonist Profiles",</p>
<p class="p1"><span class="Apple-converted-space">  </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">  </span>onClose: onBack,</p>
<p class="p1"><span class="Apple-converted-space">  </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: [jsx("h2", {</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: "Character Profiles"</p>
<p class="p1"><span class="Apple-converted-space">    </span>}), jsx("p", {</p>
<p class="p1"><span class="Apple-converted-space">      </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">        </span>marginBottom: '20px',</p>
<p class="p1"><span class="Apple-converted-space">        </span>fontSize: '13px',</p>
<p class="p1"><span class="Apple-converted-space">        </span>color: '#333333'</p>
<p class="p1"><span class="Apple-converted-space">      </span>},</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: "Meet the minds shaping Rogers Park."</p>
<p class="p1"><span class="Apple-converted-space">    </span>}), Object.values(CHARACTERS).map(char =&gt; jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">      </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">        </span>marginBottom: '20px',</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding: '10px',</p>
<p class="p1"><span class="Apple-converted-space">        </span>border: '1px solid #D4D0C8',</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundColor: '#F9F9F9'</p>
<p class="p1"><span class="Apple-converted-space">      </span>},</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: [jsx("h3", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>marginTop: 0,</p>
<p class="p1"><span class="Apple-converted-space">          </span>marginBottom: '5px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>fontSize: '16px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>color: '#1a1a1a'</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: `${char.name}${char.locked ? ' (LOCKED)' : ''}`</p>
<p class="p1"><span class="Apple-converted-space">      </span>}), jsx("p", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>fontSize: '14px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>lineHeight: '1.5',</p>
<p class="p1"><span class="Apple-converted-space">          </span>margin: 0,</p>
<p class="p1"><span class="Apple-converted-space">          </span>color: '#1a1a1a'</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: [" ", char.description, " "]</p>
<p class="p1"><span class="Apple-converted-space">      </span>})]</p>
<p class="p1"><span class="Apple-converted-space">    </span>}, char.id)), jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">      </span>onClick: onBack,</p>
<p class="p1"><span class="Apple-converted-space">      </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">        </span>marginTop: '20px'</p>
<p class="p1"><span class="Apple-converted-space">      </span>},</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: "Back"</p>
<p class="p1"><span class="Apple-converted-space">    </span>})]</p>
<p class="p1"><span class="Apple-converted-space">  </span>})</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">const SoftLandingScreen = ({ onContinue }) =&gt; jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">    </span>title: "Take a Breath",</p>
<p class="p1"><span class="Apple-converted-space">    </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">    </span>onClose: onContinue,</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>jsx("h2", { children: "To be continued, not concluded." }),</p>
<p class="p1"><span class="Apple-converted-space">            </span>jsx("p", { children: "You've paused the story. The world will be here when you're ready to return." }),</p>
<p class="p1"><span class="Apple-converted-space">            </span>jsx("p", { style: { fontSize: '13px', color: '#333' }, children: "Take a moment. Drink some water. Stretch. The chaos of Rogers Park can wait." }),</p>
<p class="p1"><span class="Apple-converted-space">            </span>jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick: onContinue,</p>
<p class="p1"><span class="Apple-converted-space">                </span>style: { marginTop: '20px' },</p>
<p class="p1"><span class="Apple-converted-space">                </span>children: "Return to Main Menu"</p>
<p class="p1"><span class="Apple-converted-space">            </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>})</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">const DebriefScreen = ({ storyState, onContinue }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const { choiceCounts, pathHistory, characterId } = storyState;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const characterName = CHARACTERS[characterId]?.name || 'Traveler';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const getDominantTrait = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (!choiceCounts) return "Balanced";</p>
<p class="p1"><span class="Apple-converted-space">        </span>const { care, chaos, clever } = choiceCounts;</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (care &gt; chaos &amp;&amp; care &gt; clever) return "Care";</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (chaos &gt; care &amp;&amp; chaos &gt; clever) return "Chaos";</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (clever &gt; care &amp;&amp; clever &gt; chaos) return "Clever";</p>
<p class="p1"><span class="Apple-converted-space">        </span>return "Balanced";</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>const dominantTrait = getDominantTrait();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Session Debrief",</p>
<p class="p1"><span class="Apple-converted-space">        </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">        </span>onClose: onContinue,</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                </span>jsx("h2", { children: `${characterName}'s Journey` }),</p>
<p class="p1"><span class="Apple-converted-space">                </span>jsx("p", { children: "Here's how your choices tended to fall:" }),</p>
<p class="p1"><span class="Apple-converted-space">                </span>jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>style: { padding: '15px', border: '1px solid #ccc', backgroundColor: '#f9f9f9', marginBottom: '20px' },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsx("p", { children: `Care: ${choiceCounts.care || 0}` }),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsx("p", { children: `Chaos: ${choiceCounts.chaos || 0}` }),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsx("p", { children: `Clever: ${choiceCounts.clever || 0}` }),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsx("h3", { children: `Dominant approach: ${dominantTrait}` })</p>
<p class="p1"><span class="Apple-converted-space">                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                </span>}),</p>
<p class="p1"><span class="Apple-converted-space">                </span>jsx("p", { style: { fontSize: '13px' }, children: "A suggestion for gentleness: Remember that every path taken shapes the world in its own way. There are no wrong answers." }),</p>
<p class="p1"><span class="Apple-converted-space">                </span>jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onClick: onContinue,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>style: { marginTop: '20px' },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: "Continue"</p>
<p class="p1"><span class="Apple-converted-space">                </span>})</p>
<p class="p1"><span class="Apple-converted-space">            </span>]</p>
<p class="p1"><span class="Apple-converted-space">        </span>})</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const RecapScreen = ({ recapText, onContinue }) =&gt; jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">    </span>title: "Previously on HD.TV...",</p>
<p class="p1"><span class="Apple-converted-space">    </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">    </span>onClose: onContinue,</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>jsx("h2", { children: "Previously on..." }),</p>
<p class="p1"><span class="Apple-converted-space">            </span>jsx("p", { style: { fontSize: '14px', lineHeight: '1.7' }, children: recapText || "Your story continues." }),</p>
<p class="p1"><span class="Apple-converted-space">            </span>jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick: onContinue,</p>
<p class="p1"><span class="Apple-converted-space">                </span>style: { marginTop: '20px' },</p>
<p class="p1"><span class="Apple-converted-space">                </span>children: "Jump Back In"</p>
<p class="p1"><span class="Apple-converted-space">            </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>})</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">const MapScreen = ({ storyState, onTravel, onClose }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const { currentLocation, flags } = storyState;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>return jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: "Rogers Park - 49th Ward",</p>
<p class="p1"><span class="Apple-converted-space">        </span>onClose: () =&gt; onTravel(null), // Close returns to current location</p>
<p class="p1"><span class="Apple-converted-space">        </span>className: "map-window",</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                </span>jsx("h2", { children: "World Map" }),</p>
<p class="p1"><span class="Apple-converted-space">                </span>jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className: "map-container",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>style: { width: '100%', aspectRatio: '16 / 9', position: 'relative' },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: Object.values(LOCATIONS).map(loc =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const isCurrent = loc.id === currentLocation;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const isAvailable = loc.isAvailable(flags) &amp;&amp; !isCurrent;</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>return jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>className: "map-location",</p>
<p class="p1"><span class="Apple-converted-space">                            </span>style: { ...loc.coords },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>children: jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>className: isCurrent ? 'current' : '',</p>
<p class="p1"><span class="Apple-converted-space">                                </span>disabled: !isAvailable,</p>
<p class="p1"><span class="Apple-converted-space">                                </span>"aria-disabled": !isAvailable,</p>
<p class="p1"><span class="Apple-converted-space">                                </span>onClick: () =&gt; onTravel(loc.id),</p>
<p class="p1"><span class="Apple-converted-space">                                </span>children: loc.name</p>
<p class="p1"><span class="Apple-converted-space">                            </span>})</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}, loc.id)</p>
<p class="p1"><span class="Apple-converted-space">                    </span>})</p>
<p class="p1"><span class="Apple-converted-space">                </span>}),</p>
<p class="p1"><span class="Apple-converted-space">                 </span>jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onClick: () =&gt; onTravel(null),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>style: { marginTop: '20px' },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: "Stay Here"</p>
<p class="p1"><span class="Apple-converted-space">                </span>})</p>
<p class="p1"><span class="Apple-converted-space">            </span>]</p>
<p class="p1"><span class="Apple-converted-space">        </span>})</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const LoreWindow = ({ lore, onClose }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (!lore) return null;</p>
<p class="p1"><span class="Apple-converted-space">    </span>return jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>className: "terminal-overlay", // Re-use overlay style</p>
<p class="p1"><span class="Apple-converted-space">        </span>onClick: onClose,</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick: e =&gt; e.stopPropagation(),</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">                </span>title: lore.title,</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClose: onClose,</p>
<p class="p1"><span class="Apple-converted-space">                </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">                </span>children: jsx("p", { style: { whiteSpace: 'pre-wrap', fontSize: '14px' }, children: lore.content })</p>
<p class="p1"><span class="Apple-converted-space">            </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>})</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const TerminalOverlay = ({ characterId, onClose }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const getTerminalContent = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>switch(characterId) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'rizzlord':</p>
<p class="p1"><span class="Apple-converted-space">                </span>return jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsx("h3", { children: "Rizz Army DMs" }),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsxs("div", { className: "dm-message", children: [ jsx("span", { className: "dm-user", children: "AlphaChad88" }), jsx("p", { children: "Bro that Glenwood place is full of woke plants, u gotta go back and drop more truth bombs!" }) ]}),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsxs("div", { className: "dm-message", children: [ jsx("span", { className: "dm-user", children: "Slayer_of_Soy" }), jsx("p", { children: "They can't cancel you if you're too real. Don't let them silence you! The Rizz Army has your back." }) ]}),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsxs("div", { className: "dm-message", children: [ jsx("span", { className: "dm-user", children: "FactsOverFeelings" }), jsx("p", { children: "That hyena thing is probably some kind of deep state op to make you look bad. Stay strong king." }) ]})</p>
<p class="p1"><span class="Apple-converted-space">                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'hd':</p>
<p class="p1"><span class="Apple-converted-space">                 </span>return jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsx("h3", { children: "Chirper Feed" }),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsxs("div", { className: "chirp", children: [ jsx("p", { children: [jsx("span", {className: "chirp-user", children: "RogersParkRawFeed "}), jsx("span", {className: "chirp-handle", children: "@RP_RawFeed"}), jsx("br", {}), "OMG the glitter bomb photo from The Glenwood is going viral! Who is this mystery diva?! #HyenaDiva #GlenwoodChaos"] }) ]}),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsxs("div", { className: "chirp", children: [ jsx("p", { children: [jsx("span", {className: "chirp-user", children: "GothPoet4Lyfe "}), jsx("span", {className: "chirp-handle", children: "@SadBoiHours"}), jsx("br", {}), "Ugh, another attention-seeker at The Glenwood. So shallow. My poem about a dying raven got completely ignored." ]}) ]})</p>
<p class="p1"><span class="Apple-converted-space">                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'sypher':</p>
<p class="p1"><span class="Apple-converted-space">                 </span>return jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsx("h3", { style: { color: '#32CD32' }, children: "SYSTEM LOG" }),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsx("div", { className: "log-entry", children: [ jsx("span", { className: "log-timestamp", children: "[21:34:12] " }), jsx("span", { className: "log-level-info", children: "[INFO] " }), "Subject: Rizzler. Emotional state: Volatile. Probability of irrational escalation: 92.7%." ]}),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsx("div", { className: "log-entry", children: [ jsx("span", { className: "log-timestamp", children: "[21:35:04] " }), jsx("span", { className: "log-level-info", children: "[INFO] " }), "Subject: Hyena Diva. Energy signature: Anomalous, high-entropy. Origin: Unknown. Classification: Catalyst." ]}),</p>
<p class="p1"><span class="Apple-converted-space">                         </span>jsx("div", { className: "log-entry", children: [ jsx("span", { className: "log-timestamp", children: "[21:37:21] " }), jsx("span", { className: "log-level-warn", children: "[WARN] " }), "Subject: Nabu. Threat Level: Minimal. Classification: Moderator/Chaotic Variable. Monitoring for system interference." ]}),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'nabu':</p>
<p class="p1"><span class="Apple-converted-space">                </span>return jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsx("h3", { children: "Field Notes" }),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsxs("div", { className: "note-entry", children: [jsx("h4", {style: {margin: '0 0 5px 0', fontSize: '14px'}, children: "Observation: The Catalyst"}), jsx("p", {style: {margin: 0}, children: "The 'Hyena Diva' entity operates on a logic entirely separate from the others. Not chaos for chaos' sake, but an intuitive, aesthetic-driven reality shaping. What is the root of this 'Fabulousness' philosophy? Is it a genuine cosmic force or a coping mechanism?"})]}),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>jsxs("div", { className: "note-entry", children: [jsx("h4", {style: {margin: '0 0 5px 0', fontSize: '14px'}, children: "Query: The Network"}), jsx("p", {style: {margin: 0}, children: "Sypher's communication is purely data-driven, yet its actions imply a deeper motive than mere observation. 'Benevolent Guidance' protocol suggests a desired outcome. What is its definition of a 'better' paradigm? Efficiency seems to be a high priority. Is there room for messy, beautiful static in its ideal world?"})]})</p>
<p class="p1"><span class="Apple-converted-space">                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>default:</p>
<p class="p1"><span class="Apple-converted-space">                </span>return jsx("p", { children: "No data available." });</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>const themeClass = `terminal-${characterId}`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>className: `terminal-overlay ${themeClass}`,</p>
<p class="p1"><span class="Apple-converted-space">        </span>onClick: onClose,</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick: e =&gt; e.stopPropagation(),</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">                </span>title: "Personal Terminal",</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClose: onClose,</p>
<p class="p1"><span class="Apple-converted-space">                </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">                </span>windowBackgroundColor: characterId === 'sypher' ? '#0A0F0A' : '#FFFAF0',</p>
<p class="p1"><span class="Apple-converted-space">                </span>children: jsx("div", { className: "terminal-content", children: getTerminalContent() })</p>
<p class="p1"><span class="Apple-converted-space">            </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>})</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">const DESKTOP_STAR_COLORS = ['#00ffcc', '#7722ff', '#bc72fa', '#72fade'];</p>
<p class="p1">const NUM_DESKTOP_STARS = 40;</p>
<p class="p1">const CURSED_POINTER_TRAIL_COLORS = ['#72fade', '#bc72fa', '#defade', '#bc7fff'];</p>
<p class="p2"><br></p>
<p class="p1">const Clock = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [time, setTime] = useState(new Date());</p>
<p class="p1"><span class="Apple-converted-space">  </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const timerId = setInterval(() =&gt; setTime(new Date()), 1000);</p>
<p class="p1"><span class="Apple-converted-space">    </span>return () =&gt; clearInterval(timerId);</p>
<p class="p1"><span class="Apple-converted-space">  </span>}, []);</p>
<p class="p1"><span class="Apple-converted-space">  </span>return jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">    </span>id: "taskbar-clock",</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: time.toLocaleTimeString([], {</p>
<p class="p1"><span class="Apple-converted-space">      </span>hour: '2-digit',</p>
<p class="p1"><span class="Apple-converted-space">      </span>minute: '2-digit'</p>
<p class="p1"><span class="Apple-converted-space">    </span>})</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const StartMenu = ({</p>
<p class="p1"><span class="Apple-converted-space">  </span>isOpen,</p>
<p class="p1"><span class="Apple-converted-space">  </span>onNavigate,</p>
<p class="p1"><span class="Apple-converted-space">  </span>closeMenu,</p>
<p class="p1"><span class="Apple-converted-space">  </span>isGameActive</p>
<p class="p1">}) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>if (!isOpen) return null;</p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleNav = (screen) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>onNavigate(screen);</p>
<p class="p1"><span class="Apple-converted-space">    </span>closeMenu();</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p1"><span class="Apple-converted-space">  </span>return jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">    </span>id: "start-menu",</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: jsx("ul", {</p>
<p class="p1"><span class="Apple-converted-space">      </span>className: "choices-list",</p>
<p class="p1"><span class="Apple-converted-space">      </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">        </span>margin: 0</p>
<p class="p1"><span class="Apple-converted-space">      </span>},</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">        </span>jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">          </span>children: jsx("button", { onClick: () =&gt; handleNav('characterSelect'), children: [jsx("img", { src: ASSET_DATA_URIS.archway_icon, alt: "", style: { width: '16px', height: '16px', marginRight: '8px', verticalAlign: 'middle', imageRendering: 'pixelated' } }), "New Game"] })</p>
<p class="p1"><span class="Apple-converted-space">        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">        </span>jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: jsx("button", { onClick: () =&gt; handleNav('saveGame'), disabled: !isGameActive, "aria-disabled": !isGameActive, children: [jsx("img", { src: ASSET_DATA_URIS.disk_icon, alt: "", style: { width: '16px', height: '16px', marginRight: '8px', verticalAlign: 'middle', imageRendering: 'pixelated' } }), "Save Game"] })</p>
<p class="p1"><span class="Apple-converted-space">        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">        </span>jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: jsx("button", { onClick: () =&gt; handleNav('loadGame'), children: [jsx("img", { src: ASSET_DATA_URIS.folder_icon, alt: "", style: { width: '16px', height: '16px', marginRight: '8px', verticalAlign: 'middle', imageRendering: 'pixelated' } }), "Load Game"] })</p>
<p class="p1"><span class="Apple-converted-space">        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">        </span>jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>style: { borderTop: '1px solid #808080', margin: '5px 0', paddingTop: '5px' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">        </span>jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: jsx("button", { onClick: () =&gt; handleNav('profiles'), children: [jsx("img", { src: ASSET_DATA_URIS.bird_icon, alt: "", style: { width: '16px', height: '16px', marginRight: '8px', verticalAlign: 'middle', imageRendering: 'pixelated' } }), "Protagonist Profiles"] })</p>
<p class="p1"><span class="Apple-converted-space">        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">        </span>jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: jsx("button", { disabled: true, "aria-disabled": true, children: [jsx("img", { src: ASSET_DATA_URIS.tv_icon, alt: "", style: { width: '16px', height: '16px', marginRight: '8px', verticalAlign: 'middle', imageRendering: 'pixelated' } }), "Episodes (Soon)"] })</p>
<p class="p1"><span class="Apple-converted-space">        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">        </span>jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: jsx("button", { disabled: true, "aria-disabled": true, children: [jsx("img", { src: ASSET_DATA_URIS.hanger_icon, alt: "", style: { width: '16px', height: '16px', marginRight: '8px', verticalAlign: 'middle', imageRendering: 'pixelated' } }), "Wardrobe (Soon)"] })</p>
<p class="p1"><span class="Apple-converted-space">        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">      </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>})</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const Taskbar = ({ onStartButtonClick, currentWindowTitle }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleStartClick = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>onStartButtonClick();</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p1"><span class="Apple-converted-space">  </span>return jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">    </span>id: "taskbar",</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: [jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">      </span>id: "start-button",</p>
<p class="p1"><span class="Apple-converted-space">      </span>onClick: handleStartClick,</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: jsx("img", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>src: ASSET_DATA_URIS.star_icon,</p>
<p class="p1"><span class="Apple-converted-space">        </span>alt: "Start",</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>width: '16px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>height: '16px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>imageRendering: 'pixelated'</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>})</p>
<p class="p1"><span class="Apple-converted-space">    </span>}), jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">      </span>id: "taskbar-app-title",</p>
<p class="p1"><span class="Apple-converted-space">      </span>title: currentWindowTitle,</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: currentWindowTitle</p>
<p class="p1"><span class="Apple-converted-space">    </span>}), jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: { marginLeft: 'auto', display: 'flex', alignItems: 'center' },</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>jsx(Clock, {})</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>})]</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const FlavorTextTooltip = ({ text, x, y }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (!text) return null;</p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">        </span>jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>className: "flavor-text-tooltip",</p>
<p class="p1"><span class="Apple-converted-space">            </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>top: `${y}px`,</p>
<p class="p1"><span class="Apple-converted-space">                </span>left: `${x}px`</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: text</p>
<p class="p1"><span class="Apple-converted-space">        </span>})</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const SiteNav = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const navRef = useRef(null);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const fetchNav = async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const res = await fetch('/nav.html', { cache: 'no-store' });</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (res.ok &amp;&amp; navRef.current) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>navRef.current.innerHTML = await res.text();</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error("Failed to fetch nav.html:", error);</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (navRef.current) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>navRef.current.innerHTML = "&lt;p&gt;Error loading navigation.&lt;/p&gt;";</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p1"><span class="Apple-converted-space">        </span>fetchNav();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}, []);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return jsx("div", { id: "site-nav", ref: navRef });</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">const InGameScreen = props =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>const {</p>
<p class="p1"><span class="Apple-converted-space">    </span>storyState,</p>
<p class="p1"><span class="Apple-converted-space">    </span>onChoice,</p>
<p class="p1"><span class="Apple-converted-space">    </span>onNavigate,</p>
<p class="p1"><span class="Apple-converted-space">    </span>onClose,</p>
<p class="p1"><span class="Apple-converted-space">    </span>onInteractiveClick,</p>
<p class="p1"><span class="Apple-converted-space">    </span>onLoreClick,</p>
<p class="p1"><span class="Apple-converted-space">    </span>onTerminalOpen</p>
<p class="p1"><span class="Apple-converted-space">  </span>} = props;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>if (!storyState.currentNodeId || !storyState.characterId) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>return jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">      </span>title: "Error",</p>
<p class="p1"><span class="Apple-converted-space">      </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">      </span>onClose: onClose,</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: jsx("p", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: "Error: No current story node or character."</p>
<p class="p1"><span class="Apple-converted-space">      </span>})</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>const node = NODES[storyState.currentNodeId];</p>
<p class="p1"><span class="Apple-converted-space">  </span>const character = CHARACTERS[storyState.characterId];</p>
<p class="p1"><span class="Apple-converted-space">  </span>if (!node || !character) return jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">    </span>title: "Error",</p>
<p class="p1"><span class="Apple-converted-space">    </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">    </span>onClose: onClose,</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: jsx("p", {</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: "Error: Could not load node or character data."</p>
<p class="p1"><span class="Apple-converted-space">    </span>})</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const {</p>
<p class="p1"><span class="Apple-converted-space">    </span>playerStats,</p>
<p class="p1"><span class="Apple-converted-space">    </span>flags,</p>
<p class="p1"><span class="Apple-converted-space">    </span>pathHistory</p>
<p class="p1"><span class="Apple-converted-space">  </span>} = storyState;</p>
<p class="p2"><span class="Apple-converted-space">  </span></p>
<p class="p1"><span class="Apple-converted-space">  </span>const visibleChoices = node.choices?.filter(choice =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (choice.character_pov &amp;&amp; !choice.character_pov.includes(storyState.characterId)) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>return false;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (choice.condition &amp;&amp; !choice.condition(flags)) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>return false;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>return true;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}) || [];</p>
<p class="p2"><span class="Apple-converted-space">  </span></p>
<p class="p1"><span class="Apple-converted-space">  </span>const allInteractives = [</p>
<p class="p1"><span class="Apple-converted-space">    </span>...(node.interactives || []),</p>
<p class="p1"><span class="Apple-converted-space">    </span>...(node.loreObjects || [])</p>
<p class="p1"><span class="Apple-converted-space">  </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>return jsx(StyledWindow, {</p>
<p class="p1"><span class="Apple-converted-space">    </span>title: node.title || character.name + "'s Journey",</p>
<p class="p1"><span class="Apple-converted-space">    </span>className: "app-container",</p>
<p class="p1"><span class="Apple-converted-space">    </span>windowBackgroundColor: node.windowBackgroundColor || '#FFFAF0',</p>
<p class="p1"><span class="Apple-converted-space">    </span>backgroundImageUrl: node.backgroundImageUrl,</p>
<p class="p1"><span class="Apple-converted-space">    </span>onClose: onClose,</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">        </span>jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>className: "tap-out-button",</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick: () =&gt; onNavigate('softLanding'),</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: "Tap Out"</p>
<p class="p1"><span class="Apple-converted-space">        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">        </span>jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">          </span>justifyContent: 'space-between',</p>
<p class="p1"><span class="Apple-converted-space">          </span>marginBottom: '15px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>paddingBottom: '10px',</p>
<p class="p1"><span class="Apple-converted-space">          </span>borderBottom: '1px solid #808080'</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: [jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">          </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: '25%',</p>
<p class="p1"><span class="Apple-converted-space">            </span>minWidth: '120px',</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: '120px',</p>
<p class="p1"><span class="Apple-converted-space">            </span>backgroundColor: 'rgba(234, 234, 234, 0.8)',</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: '#1a1a1a',</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">            </span>alignItems: 'center',</p>
<p class="p1"><span class="Apple-converted-space">            </span>justifyContent: 'center',</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: '1px inset #B0B0B0',</p>
<p class="p1"><span class="Apple-converted-space">            </span>marginRight: '15px',</p>
<p class="p1"><span class="Apple-converted-space">            </span>flexShrink: 0,</p>
<p class="p1"><span class="Apple-converted-space">          </span>},</p>
<p class="p1"><span class="Apple-converted-space">          </span>children: character.detailedPortraitUrl ? jsx("img", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>src: character.detailedPortraitUrl,</p>
<p class="p1"><span class="Apple-converted-space">            </span>alt: `${character.name} Portrait`,</p>
<p class="p1"><span class="Apple-converted-space">            </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">              </span>width: '100px',</p>
<p class="p1"><span class="Apple-converted-space">              </span>height: '100px',</p>
<p class="p1"><span class="Apple-converted-space">              </span>objectFit: 'contain',</p>
<p class="p1"><span class="Apple-converted-space">              </span>imageRendering: 'pixelated'</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>onError: e =&gt; e.currentTarget.style.display = 'none'</p>
<p class="p1"><span class="Apple-converted-space">          </span>}) : "Loading..."</p>
<p class="p1"><span class="Apple-converted-space">        </span>}), jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>flexGrow: 1,</p>
<p class="p1"><span class="Apple-converted-space">                </span>fontSize: '11px',</p>
<p class="p1"><span class="Apple-converted-space">                </span>color: '#1a1a1a',</p>
<p class="p1"><span class="Apple-converted-space">                </span>backgroundColor: 'rgba(245, 245, 245, 0.8)',</p>
<p class="p1"><span class="Apple-converted-space">                </span>padding: '8px',</p>
<p class="p1"><span class="Apple-converted-space">                </span>border: '1px inset #B0B0B0',</p>
<p class="p1"><span class="Apple-converted-space">                </span>overflowY: 'auto',</p>
<p class="p1"><span class="Apple-converted-space">                </span>maxHeight: '120px',</p>
<p class="p1"><span class="Apple-converted-space">                </span>lineHeight: '1.6',</p>
<p class="p1"><span class="Apple-converted-space">                </span>textTransform: 'capitalize'</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">                </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                    </span>jsx("strong", {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>display: 'block',</p>
<p class="p1"><span class="Apple-converted-space">                            </span>borderBottom: '1px solid #808080',</p>
<p class="p1"><span class="Apple-converted-space">                            </span>marginBottom: '4px',</p>
<p class="p1"><span class="Apple-converted-space">                            </span>paddingBottom: '3px',</p>
<p class="p1"><span class="Apple-converted-space">                            </span>fontSize: '12px'</p>
<p class="p1"><span class="Apple-converted-space">                        </span>},</p>
<p class="p1"><span class="Apple-converted-space">                        </span>children: "STATUS:"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>playerStats ?<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>Object.entries(playerStats).map(([stat, value]) =&gt;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                            </span>jsx("div", {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                </span>children: `${stat}: ${value}`<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                            </span>}, stat)</p>
<p class="p1"><span class="Apple-converted-space">                        </span>) : "No stats available."</p>
<p class="p1"><span class="Apple-converted-space">                </span>]</p>
<p class="p1"><span class="Apple-converted-space">            </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>})]</p>
<p class="p1"><span class="Apple-converted-space">      </span>}), jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>clear: 'both'</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: jsx(GlitchyText, {</p>
<p class="p1"><span class="Apple-converted-space">          </span>text: node.description</p>
<p class="p1"><span class="Apple-converted-space">        </span>})</p>
<p class="p1"><span class="Apple-converted-space">      </span>}), jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">          </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>marginTop: '20px'</p>
<p class="p1"><span class="Apple-converted-space">          </span>},</p>
<p class="p1"><span class="Apple-converted-space">          </span>children: jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: [jsx("h3", {</p>
<p class="p1"><span class="Apple-converted-space">              </span>style: node.backgroundImageUrl || node.windowBackgroundColor === '#0A0F0A' ? { color: 'inherit', textShadow: 'inherit' } : {},</p>
<p class="p1"><span class="Apple-converted-space">              </span>children: "Choose your fate:"</p>
<p class="p1"><span class="Apple-converted-space">            </span>}), jsx("ul", {</p>
<p class="p1"><span class="Apple-converted-space">              </span>className: "choices-list",</p>
<p class="p1"><span class="Apple-converted-space">              </span>children: visibleChoices.map((choice, index) =&gt; jsx("li", {</p>
<p class="p1"><span class="Apple-converted-space">                </span>children: jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onClick: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onChoice(choice.nextNodeId, choice);</p>
<p class="p1"><span class="Apple-converted-space">                  </span>},</p>
<p class="p1"><span class="Apple-converted-space">                  </span>children: jsx(GlitchyText, {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: choice.text</p>
<p class="p1"><span class="Apple-converted-space">                  </span>})</p>
<p class="p1"><span class="Apple-converted-space">                </span>})</p>
<p class="p1"><span class="Apple-converted-space">              </span>}, index))</p>
<p class="p1"><span class="Apple-converted-space">            </span>})]</p>
<p class="p1"><span class="Apple-converted-space">          </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">        </span>jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>style: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end', marginTop: '15px' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                </span>pathHistory &amp;&amp; pathHistory.length &gt; 0 &amp;&amp; jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className: "breadcrumb-trail",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: ["Path: ", pathHistory.map(step =&gt; step.text.replace(/\[.*?\]\s/, '')).join(' → ')]</p>
<p class="p1"><span class="Apple-converted-space">                </span>}),</p>
<p class="p1"><span class="Apple-converted-space">                </span>jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>style: { marginLeft: 'auto', display: 'flex', gap: '5px' },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">                         </span>jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onClick: onTerminalOpen,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>title: "Open Personal Terminal",</p>
<p class="p1"><span class="Apple-converted-space">                            </span>style: { fontSize: '12px', minWidth: 'auto', padding: '6px 12px' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>children: jsx("img", { src: ASSET_DATA_URIS.terminal_icon, alt: "Terminal", style: { width: '16px', height: '16px', verticalAlign: 'middle', imageRendering: 'pixelated' } })</p>
<p class="p1"><span class="Apple-converted-space">                         </span>}),</p>
<p class="p1"><span class="Apple-converted-space">                         </span>jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onClick: () =&gt; onNavigate('codex'),</p>
<p class="p1"><span class="Apple-converted-space">                            </span>title: "Open CoAIexicon",</p>
<p class="p1"><span class="Apple-converted-space">                            </span>style: { fontSize: '12px', minWidth: 'auto', padding: '6px 12px' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>children: jsx("img", { src: ASSET_DATA_URIS.berries_icon, alt: "CoAIexicon", style: { width: '16px', height: '16px', verticalAlign: 'middle', imageRendering: 'pixelated' } })</p>
<p class="p1"><span class="Apple-converted-space">                        </span>})</p>
<p class="p1"><span class="Apple-converted-space">                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                </span>})</p>
<p class="p1"><span class="Apple-converted-space">            </span>]</p>
<p class="p1"><span class="Apple-converted-space">        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">        </span>allInteractives.map(interactive =&gt; jsx("button", {</p>
<p class="p1"><span class="Apple-converted-space">            </span>className: `interactive-object ${storyState.clickedInteractives.has(interactive.id) ? 'clicked' : ''}`,</p>
<p class="p1"><span class="Apple-converted-space">            </span>"aria-label": interactive.title,</p>
<p class="p1"><span class="Apple-converted-space">            </span>title: interactive.title,</p>
<p class="p1"><span class="Apple-converted-space">            </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>top: interactive.top,</p>
<p class="p1"><span class="Apple-converted-space">                </span>left: interactive.left,</p>
<p class="p1"><span class="Apple-converted-space">                </span>width: interactive.width,</p>
<p class="p1"><span class="Apple-converted-space">                </span>height: interactive.height,</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick: e =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>e.stopPropagation();</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (interactive.type === 'lore') {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onLoreClick(interactive);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onInteractiveClick(interactive, e);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}, interactive.id))</p>
<p class="p1"><span class="Apple-converted-space">      </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>})</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const App = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [currentScreen, setCurrentScreen] = useState('mainMenu');</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [storyState, setStoryState] = useState({</p>
<p class="p1"><span class="Apple-converted-space">    </span>characterId: null,</p>
<p class="p1"><span class="Apple-converted-space">    </span>currentNodeId: null,</p>
<p class="p1"><span class="Apple-converted-space">    </span>playerStats: null,</p>
<p class="p1"><span class="Apple-converted-space">    </span>flags: {},</p>
<p class="p1"><span class="Apple-converted-space">    </span>unlockedCodexEntries: new Set(),</p>
<p class="p1"><span class="Apple-converted-space">    </span>clickedInteractives: new Set(),</p>
<p class="p1"><span class="Apple-converted-space">    </span>pathHistory: [],</p>
<p class="p1"><span class="Apple-converted-space">    </span>choiceCounts: { care: 0, chaos: 0, clever: 0 },</p>
<p class="p1"><span class="Apple-converted-space">    </span>currentLocation: null,</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [selectedCodexEntryId, setSelectedCodexEntryId] = useState(null);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [isStartMenuOpen, setIsStartMenuOpen] = useState(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [currentTaskbarTitle, setCurrentTaskbarTitle] = useState(GAME_TITLE + " - Main Menu");</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [saveLoadState, setSaveLoadState] = useState({ isOpen: false, mode: null });</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [saveSlots, setSaveSlots] = useState([null, null, null, null]);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [tooltip, setTooltip] = useState({ visible: false, text: '', x: 0, y: 0 });</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [flash, setFlash] = useState({ active: false, color: '' });</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [recapState, setRecapState] = useState({ visible: false, text: '' });</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [loreContent, setLoreContent] = useState(null);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [isTerminalOpen, setIsTerminalOpen] = useState(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const startMenuRef = useRef(null);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const tooltipTimeoutRef = useRef(null);</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const initializeUnlockedCodex = useMemo(() =&gt; () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const initialUnlocks = new Set();</p>
<p class="p1"><span class="Apple-converted-space">    </span>Object.values(CODEX_ENTRIES).forEach(entry =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (entry.unlockedInitially) initialUnlocks.add(entry.id);</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>return initialUnlocks;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}, []);</p>
<p class="p2"><span class="Apple-converted-space">  </span></p>
<p class="p1"><span class="Apple-converted-space">  </span>const getBaseStoryState = useCallback(() =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">    </span>characterId: null,</p>
<p class="p1"><span class="Apple-converted-space">    </span>currentNodeId: null,</p>
<p class="p1"><span class="Apple-converted-space">    </span>playerStats: null,</p>
<p class="p1"><span class="Apple-converted-space">    </span>flags: {},</p>
<p class="p1"><span class="Apple-converted-space">    </span>unlockedCodexEntries: initializeUnlockedCodex(),</p>
<p class="p1"><span class="Apple-converted-space">    </span>clickedInteractives: new Set(),</p>
<p class="p1"><span class="Apple-converted-space">    </span>pathHistory: [],</p>
<p class="p1"><span class="Apple-converted-space">    </span>choiceCounts: { care: 0, chaos: 0, clever: 0 },</p>
<p class="p1"><span class="Apple-converted-space">    </span>currentLocation: null</p>
<p class="p1"><span class="Apple-converted-space">  </span>}), [initializeUnlockedCodex]);</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const readSaveSlots = useCallback(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>try {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const data = localStorage.getItem(SAVE_GAME_KEY);</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (data) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const parsed = JSON.parse(data);</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (Array.isArray(parsed) &amp;&amp; parsed.length === 4) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const restoredSlots = parsed.map(slot =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (slot &amp;&amp; slot.storyState) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>...slot,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>storyState: {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>...getBaseStoryState(),</p>
<p class="p1"><span class="Apple-converted-space">                                </span>...slot.storyState,</p>
<p class="p1"><span class="Apple-converted-space">                                </span>unlockedCodexEntries: new Set(slot.storyState.unlockedCodexEntries || []),</p>
<p class="p1"><span class="Apple-converted-space">                                </span>clickedInteractives: new Set(slot.storyState.clickedInteractives || [])</p>
<p class="p1"><span class="Apple-converted-space">                            </span>}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>};</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return slot;</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>return restoredSlots;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>console.error("Failed to read save slots:", e);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>return [null, null, null, null];</p>
<p class="p1"><span class="Apple-converted-space">  </span>}, [getBaseStoryState]);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const writeSaveSlots = useCallback((slots) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>try {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const serializableSlots = slots.map(slot =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (slot &amp;&amp; slot.storyState) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>return {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>...slot,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>storyState: {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>...slot.storyState,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>unlockedCodexEntries: [...(slot.storyState.unlockedCodexEntries || [])],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>clickedInteractives: [...(slot.storyState.clickedInteractives || [])]</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>return slot;</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>localStorage.setItem(SAVE_GAME_KEY, JSON.stringify(serializableSlots));</p>
<p class="p1"><span class="Apple-converted-space">    </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>console.error("Failed to write save slots:", e);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}, []);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>setStoryState(getBaseStoryState());</p>
<p class="p1"><span class="Apple-converted-space">    </span>setSaveSlots(readSaveSlots());</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const bgContainer = document.getElementById('desktop-bg-container');</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (bgContainer &amp;&amp; bgContainer.children.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>for (let i = 0; i &lt; NUM_DESKTOP_STARS; i++) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const star = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">            </span>star.className = 'desktop-star';</p>
<p class="p1"><span class="Apple-converted-space">            </span>star.style.left = `${Math.random() * 100}vw`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>star.style.top = `${Math.random() * 100}vh`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>star.style.backgroundColor = DESKTOP_STAR_COLORS[Math.floor(Math.random() * DESKTOP_STAR_COLORS.length)];</p>
<p class="p1"><span class="Apple-converted-space">            </span>star.style.animationDelay = `${Math.random() * 5}s`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>star.style.animationDuration = `${Math.random() * 3 + 3}s`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>bgContainer.appendChild(star);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>let lastTrailTime = 0;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const trailCooldown = 60;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const handleMouseMove = event =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const currentTime = Date.now();</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (currentTime - lastTrailTime &lt; trailCooldown) return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>lastTrailTime = currentTime;</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (Math.random() &lt; 0.3) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const particle = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">        </span>particle.className = 'mouse-trail-particle';</p>
<p class="p1"><span class="Apple-converted-space">        </span>particle.style.left = `${event.clientX - 2}px`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>particle.style.top = `${event.clientY - 2}px`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>particle.style.backgroundColor = CURSED_POINTER_TRAIL_COLORS[Math.floor(Math.random() * CURSED_POINTER_TRAIL_COLORS.length)];</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.body.appendChild(particle);</p>
<p class="p1"><span class="Apple-converted-space">        </span>requestAnimationFrame(() =&gt; particle.classList.add('fade-out'));</p>
<p class="p1"><span class="Apple-converted-space">        </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">          </span>if (particle.parentNode) particle.parentNode.removeChild(particle);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}, 700);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.addEventListener('mousemove', handleMouseMove);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const handleClickOutsideStartMenu = event =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (startMenuRef.current &amp;&amp; !startMenuRef.current.contains(event.target) &amp;&amp; !event.target.closest('#start-button')) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setIsStartMenuOpen(false);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (isStartMenuOpen) document.addEventListener('mousedown', handleClickOutsideStartMenu);</p>
<p class="p1"><span class="Apple-converted-space">    </span>return () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.removeEventListener('mousemove', handleMouseMove);</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.removeEventListener('mousedown', handleClickOutsideStartMenu);</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">  </span>}, [getBaseStoryState, isStartMenuOpen, readSaveSlots]);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>let title = GAME_TITLE;</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (saveLoadState.isOpen) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>title = "Data Management";</p>
<p class="p1"><span class="Apple-converted-space">    </span>} else if (isTerminalOpen || loreContent) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Keep main window title active</p>
<p class="p1"><span class="Apple-converted-space">        </span>const node = NODES[storyState.currentNodeId];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const character = CHARACTERS[storyState.characterId];</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (node &amp;&amp; character) title = node.title || character.name + "'s Journey";</p>
<p class="p1"><span class="Apple-converted-space">    </span>} else if (currentScreen === 'inGame' &amp;&amp; storyState.currentNodeId &amp;&amp; storyState.characterId) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const node = NODES[storyState.currentNodeId];</p>
<p class="p1"><span class="Apple-converted-space">      </span>const character = CHARACTERS[storyState.characterId];</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (node &amp;&amp; character) title = node.title || character.name + "'s Journey";</p>
<p class="p1"><span class="Apple-converted-space">    </span>} else if (currentScreen === 'map') title = "Rogers Park - World Map";</p>
<p class="p1"><span class="Apple-converted-space">    </span>else if (currentScreen === 'codex') title = "CoAIexicon - Knowledge Base";</p>
<p class="p1"><span class="Apple-converted-space">    </span>else if (currentScreen === 'characterSelect') title = "Select Your Protagonist";</p>
<p class="p1"><span class="Apple-converted-space">    </span>else if (currentScreen === 'profiles') title = "Protagonist Profiles";</p>
<p class="p1"><span class="Apple-converted-space">    </span>else if (currentScreen === 'debrief') title = "Session Debrief";</p>
<p class="p1"><span class="Apple-converted-space">    </span>else if (currentScreen === 'recap') title = "Previously on...";</p>
<p class="p1"><span class="Apple-converted-space">    </span>setCurrentTaskbarTitle(title);</p>
<p class="p1"><span class="Apple-converted-space">  </span>}, [currentScreen, storyState.currentNodeId, storyState.characterId, saveLoadState.isOpen, isTerminalOpen, loreContent]);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleSave = (slotIndex) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const recapText = RECAP_TEXTS[storyState.currentNodeId] || `You are currently at: ${NODES[storyState.currentNodeId]?.title || 'Unknown Location'}.`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const newSave = { storyState, timestamp: Date.now(), recapText };</p>
<p class="p1"><span class="Apple-converted-space">    </span>const newSlots = [...saveSlots];</p>
<p class="p1"><span class="Apple-converted-space">    </span>newSlots[slotIndex] = newSave;</p>
<p class="p1"><span class="Apple-converted-space">    </span>setSaveSlots(newSlots);</p>
<p class="p1"><span class="Apple-converted-space">    </span>writeSaveSlots(newSlots);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setSaveLoadState({ isOpen: false, mode: null });</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleLoad = (slotIndex) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const slot = saveSlots[slotIndex];</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (slot) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setStoryState(slot.storyState);</p>
<p class="p1"><span class="Apple-converted-space">        </span>setRecapState({ visible: true, text: slot.recapText });</p>
<p class="p1"><span class="Apple-converted-space">        </span>setCurrentScreen('recap');</p>
<p class="p1"><span class="Apple-converted-space">        </span>setSaveLoadState({ isOpen: false, mode: null });</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleDelete = (slotIndex) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const newSlots = [...saveSlots];</p>
<p class="p1"><span class="Apple-converted-space">    </span>newSlots[slotIndex] = null;</p>
<p class="p1"><span class="Apple-converted-space">    </span>setSaveSlots(newSlots);</p>
<p class="p1"><span class="Apple-converted-space">    </span>writeSaveSlots(newSlots);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleNavigation = (screen, characterId) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>setIsStartMenuOpen(false);</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (screen === 'saveGame') {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (storyState.characterId) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>setSaveLoadState({ isOpen: true, mode: 'save' });</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (screen === 'loadGame') {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setSaveLoadState({ isOpen: true, mode: 'load' });</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (screen === 'inGame' &amp;&amp; characterId) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const selectedChar = CHARACTERS[characterId];</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (selectedChar) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const startNode = NODES[selectedChar.startNodeId];</p>
<p class="p1"><span class="Apple-converted-space">        </span>setStoryState({</p>
<p class="p1"><span class="Apple-converted-space">          </span>...getBaseStoryState(),</p>
<p class="p1"><span class="Apple-converted-space">          </span>characterId: characterId,</p>
<p class="p1"><span class="Apple-converted-space">          </span>currentNodeId: selectedChar.startNodeId,</p>
<p class="p1"><span class="Apple-converted-space">          </span>playerStats: selectedChar.initialStats ? { ...selectedChar.initialStats } : { ...DEFAULT_EMPTY_STATS },</p>
<p class="p1"><span class="Apple-converted-space">          </span>currentLocation: startNode.location,</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>setCurrentScreen('inGame');</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setStoryState(getBaseStoryState());</p>
<p class="p1"><span class="Apple-converted-space">        </span>setCurrentScreen('mainMenu');</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (screen === 'mainMenu' || screen === 'characterSelect') {</p>
<p class="p1"><span class="Apple-converted-space">         </span>setStoryState(getBaseStoryState());</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>setCurrentScreen(screen);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (screen !== 'codex') setSelectedCodexEntryId(null);</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.getElementById('root')?.scrollTo(0, 0);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><span class="Apple-converted-space">  </span></p>
<p class="p1"><span class="Apple-converted-space">  </span>const getEntryNodeForLocation = (locationId, state) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>// This logic will become more complex as more conditions are added</p>
<p class="p1"><span class="Apple-converted-space">        </span>const { characterId, flags } = state;</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (locationId === 'antique_shop') {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (characterId === 'nabu' &amp;&amp; flags.nabu_quest === 'find_lili_doll') return 'NABU_PRESENTS_LILI_DOLL';</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (characterId === 'hd' &amp;&amp; flags.hd_quest === 'find_lili_doll') return 'HD_LILI_WORLD_ENTRY';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (locationId === 'glenwood') {</p>
<p class="p1"><span class="Apple-converted-space">             </span>if (characterId === 'rizzlord') return 'RIZZLER_ALDERMAN_ARC';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Default entry nodes if needed</p>
<p class="p1"><span class="Apple-converted-space">        </span>return null;</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleTravel = (locationId) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (!locationId) { // Handles "Stay Here" or closing the map</p>
<p class="p1"><span class="Apple-converted-space">        </span>setCurrentScreen('inGame');</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const entryNodeId = getEntryNodeForLocation(locationId, storyState);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (entryNodeId &amp;&amp; NODES[entryNodeId]) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setStoryState(prev =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">            </span>...prev,</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentNodeId: entryNodeId,</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentLocation: locationId,</p>
<p class="p1"><span class="Apple-converted-space">            </span>clickedInteractives: new Set(),</p>
<p class="p1"><span class="Apple-converted-space">        </span>}));</p>
<p class="p1"><span class="Apple-converted-space">        </span>setCurrentScreen('inGame');</p>
<p class="p1"><span class="Apple-converted-space">    </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>console.warn(`No valid entry node found for ${locationId} with current state.`);</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Potentially show a message like "You have no reason to go there right now."</p>
<p class="p1"><span class="Apple-converted-space">        </span>setCurrentScreen('inGame'); // Return to the current scene</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleChoice = (nextNodeId, choice) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>setTooltip({ visible: false, text: '', x: 0, y: 0 }); // Hide tooltip on scene change</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (choice.hexFlash) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setFlash({ active: true, color: choice.hexFlash });</p>
<p class="p1"><span class="Apple-converted-space">        </span>setTimeout(() =&gt; setFlash({ active: false, color: '' }), 700);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const updateStateForChoice = prevState =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>let newStats = { ...prevState.playerStats };</p>
<p class="p1"><span class="Apple-converted-space">        </span>let newFlags = { ...prevState.flags };</p>
<p class="p1"><span class="Apple-converted-space">        </span>let newUnlockedCodex = new Set(prevState.unlockedCodexEntries);</p>
<p class="p1"><span class="Apple-converted-space">        </span>let newPathHistory = [...prevState.pathHistory, { nodeId: prevState.currentNodeId, text: choice.text }];</p>
<p class="p1"><span class="Apple-converted-space">        </span>let newChoiceCounts = { ...prevState.choiceCounts };</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (choice.text.toLowerCase().includes('[care]')) newChoiceCounts.care++;</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (choice.text.toLowerCase().includes('[chaos]')) newChoiceCounts.chaos++;</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (choice.text.toLowerCase().includes('[clever]')) newChoiceCounts.clever++;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (choice.statEffects) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const updates = choice.statEffects(newStats);</p>
<p class="p1"><span class="Apple-converted-space">            </span>newStats = { ...newStats, ...updates };</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (choice.setFlags) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>newFlags = { ...newFlags, ...choice.setFlags };</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (choice.unlocksCodexEntry &amp;&amp; CODEX_ENTRIES[choice.unlocksCodexEntry]) newUnlockedCodex.add(choice.unlocksCodexEntry);</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const nextNode = NODES[nextNodeId] || null;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>return {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>...prevState,</p>
<p class="p1"><span class="Apple-converted-space">            </span>playerStats: newStats,</p>
<p class="p1"><span class="Apple-converted-space">            </span>flags: newFlags,</p>
<p class="p1"><span class="Apple-converted-space">            </span>unlockedCodexEntries: newUnlockedCodex,</p>
<p class="p1"><span class="Apple-converted-space">            </span>pathHistory: newPathHistory,</p>
<p class="p1"><span class="Apple-converted-space">            </span>choiceCounts: newChoiceCounts,</p>
<p class="p1"><span class="Apple-converted-space">            </span>clickedInteractives: nextNode &amp;&amp; prevState.currentLocation !== nextNode.location ? new Set() : prevState.clickedInteractives,</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentNodeId: nextNodeId,</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentLocation: nextNode ? nextNode.location : prevState.currentLocation,</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (nextNodeId === '__MAP__') {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setStoryState(updateStateForChoice);</p>
<p class="p1"><span class="Apple-converted-space">        </span>setCurrentScreen('map');</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (nextNodeId === '__CHAR_SELECT__') {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setStoryState(updateStateForChoice);</p>
<p class="p1"><span class="Apple-converted-space">        </span>setCurrentScreen('debrief');</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (nextNodeId === '__MAIN_MENU__') {</p>
<p class="p1"><span class="Apple-converted-space">      </span>handleNavigation('mainMenu');</p>
<p class="p1"><span class="Apple-converted-space">      </span>return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (NODES[nextNodeId]) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>setStoryState(updateStateForChoice);</p>
<p class="p1"><span class="Apple-converted-space">    </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">      </span>console.error("Error: nextNodeId not found:", nextNodeId);</p>
<p class="p1"><span class="Apple-converted-space">      </span>handleNavigation('mainMenu');</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.getElementById('root')?.scrollTo(0, 0);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><span class="Apple-converted-space">  </span></p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleInteractiveClick = (interactive, event) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (storyState.clickedInteractives.has(interactive.id)) return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>setStoryState(prevState =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">        </span>...prevState,</p>
<p class="p1"><span class="Apple-converted-space">        </span>clickedInteractives: new Set(prevState.clickedInteractives).add(interactive.id)</p>
<p class="p1"><span class="Apple-converted-space">    </span>}));</p>
<p class="p1"><span class="Apple-converted-space">    </span>setTooltip({</p>
<p class="p1"><span class="Apple-converted-space">        </span>visible: true,</p>
<p class="p1"><span class="Apple-converted-space">        </span>text: interactive.flavorText,</p>
<p class="p1"><span class="Apple-converted-space">        </span>x: event.clientX,</p>
<p class="p1"><span class="Apple-converted-space">        </span>y: event.clientY</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (tooltipTimeoutRef.current) clearTimeout(tooltipTimeoutRef.current);</p>
<p class="p1"><span class="Apple-converted-space">    </span>tooltipTimeoutRef.current = setTimeout(() =&gt; setTooltip(prev =&gt; ({ ...prev, visible: false })), 4000);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><span class="Apple-converted-space">  </span></p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleLoreClick = (lore) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (storyState.clickedInteractives.has(lore.id)) return;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>let newUnlockedCodex = new Set(storyState.unlockedCodexEntries);</p>
<p class="p1"><span class="Apple-converted-space">    </span>let codexUnlocked = false;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (lore.unlocksCodex &amp;&amp; !storyState.unlockedCodexEntries.has(lore.unlocksCodex)) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>newUnlockedCodex.add(lore.unlocksCodex);</p>
<p class="p1"><span class="Apple-converted-space">        </span>codexUnlocked = true;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>setStoryState(prevState =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">        </span>...prevState,</p>
<p class="p1"><span class="Apple-converted-space">        </span>clickedInteractives: new Set(prevState.clickedInteractives).add(lore.id),</p>
<p class="p1"><span class="Apple-converted-space">        </span>unlockedCodexEntries: newUnlockedCodex</p>
<p class="p1"><span class="Apple-converted-space">    </span>}));</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>setLoreContent(lore); // Still show the lore window for immediate context</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (codexUnlocked) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const codexEntry = CODEX_ENTRIES[lore.unlocksCodex];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const notificationText = `New Entry: "${codexEntry.title}"`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>setTooltip({</p>
<p class="p1"><span class="Apple-converted-space">            </span>visible: true,</p>
<p class="p1"><span class="Apple-converted-space">            </span>text: notificationText,</p>
<p class="p1"><span class="Apple-converted-space">            </span>x: window.innerWidth / 2 - (notificationText.length * 4), // Rough centering</p>
<p class="p1"><span class="Apple-converted-space">            </span>y: 60</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (tooltipTimeoutRef.current) clearTimeout(tooltipTimeoutRef.current);</p>
<p class="p1"><span class="Apple-converted-space">        </span>tooltipTimeoutRef.current = setTimeout(() =&gt; setTooltip(prev =&gt; ({ ...prev, visible: false })), 4000);</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>setFlash({ active: true, color: '#00FFCC' });</p>
<p class="p1"><span class="Apple-converted-space">        </span>setTimeout(() =&gt; setFlash({ active: false, color: '' }), 700);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleSelectCodexEntry = entryId =&gt; setSelectedCodexEntryId(entryId);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const toggleStartMenu = () =&gt; setIsStartMenuOpen(prev =&gt; !prev);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const isGameActive = !!storyState.characterId;</p>
<p class="p2"><span class="Apple-converted-space">  </span></p>
<p class="p1"><span class="Apple-converted-space">  </span>const renderContent = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (saveLoadState.isOpen) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(SaveLoadWindow, {</p>
<p class="p1"><span class="Apple-converted-space">            </span>mode: saveLoadState.mode,</p>
<p class="p1"><span class="Apple-converted-space">            </span>slots: saveSlots,</p>
<p class="p1"><span class="Apple-converted-space">            </span>onSave: handleSave,</p>
<p class="p1"><span class="Apple-converted-space">            </span>onLoad: handleLoad,</p>
<p class="p1"><span class="Apple-converted-space">            </span>onDelete: handleDelete,</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClose: () =&gt; setSaveLoadState({ isOpen: false, mode: null }),</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>switch (currentScreen) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'mainMenu':</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(MainMenuScreen, { onNavigate: handleNavigation });</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'characterSelect':</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(CharacterSelectionScreen, { onCharacterSelect: charId =&gt; handleNavigation('inGame', charId), onBack: () =&gt; handleNavigation('mainMenu') });</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'inGame':</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(InGameScreen, { storyState: storyState, onChoice: handleChoice, onNavigate: handleNavigation, onClose: () =&gt; handleNavigation('mainMenu'), onInteractiveClick: handleInteractiveClick, onLoreClick: handleLoreClick, onTerminalOpen: () =&gt; setIsTerminalOpen(true) });</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'map':</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(MapScreen, { storyState: storyState, onTravel: handleTravel, onClose: () =&gt; handleNavigation('inGame') });</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'profiles':</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(ProfilesScreen, { onBack: () =&gt; handleNavigation('mainMenu') });</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'codex':</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(CodexScreen, { unlockedEntries: storyState.unlockedCodexEntries, allEntries: CODEX_ENTRIES, onBackToGame: () =&gt; setCurrentScreen('inGame'), onSelectEntry: handleSelectCodexEntry, selectedEntry: selectedCodexEntryId ? CODEX_ENTRIES[selectedCodexEntryId] : null, onClose: () =&gt; setCurrentScreen('inGame') });</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'softLanding':</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(SoftLandingScreen, { onContinue: () =&gt; handleNavigation('mainMenu') });</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'debrief':</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(DebriefScreen, { storyState: storyState, onContinue: () =&gt; handleNavigation('characterSelect') });</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'recap':</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(RecapScreen, { recapText: recapState.text, onContinue: () =&gt; setCurrentScreen('inGame') });</p>
<p class="p1"><span class="Apple-converted-space">      </span>default:</p>
<p class="p1"><span class="Apple-converted-space">        </span>return jsx(MainMenuScreen, { onNavigate: handleNavigation });</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>return jsxs(Fragment, {</p>
<p class="p1"><span class="Apple-converted-space">    </span>children: [</p>
<p class="p1"><span class="Apple-converted-space">    </span>flash.active &amp;&amp; jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>className: "hex-flash-overlay",</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: { backgroundColor: flash.color }</p>
<p class="p1"><span class="Apple-converted-space">    </span>}),</p>
<p class="p1"><span class="Apple-converted-space">    </span>isTerminalOpen &amp;&amp; jsx(TerminalOverlay, { characterId: storyState.characterId, onClose: () =&gt; setIsTerminalOpen(false) }),</p>
<p class="p1"><span class="Apple-converted-space">    </span>loreContent &amp;&amp; jsx(LoreWindow, { lore: loreContent, onClose: () =&gt; setLoreContent(null) }),</p>
<p class="p1"><span class="Apple-converted-space">    </span>jsx(SiteNav, {}),</p>
<p class="p1"><span class="Apple-converted-space">    </span>jsxs("div", {</p>
<p class="p1"><span class="Apple-converted-space">      </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">        </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">        </span>flexDirection: 'column',</p>
<p class="p1"><span class="Apple-converted-space">        </span>height: 'calc(100vh - 40px)', // Adjust height for the nav bar</p>
<p class="p1"><span class="Apple-converted-space">        </span>overflow: 'hidden'</p>
<p class="p1"><span class="Apple-converted-space">      </span>},</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: [jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: "main-content-area",</p>
<p class="p1"><span class="Apple-converted-space">        </span>style: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>flexGrow: 1,</p>
<p class="p1"><span class="Apple-converted-space">          </span>overflowY: 'auto',</p>
<p class="p1"><span class="Apple-converted-space">          </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">          </span>flexDirection: 'column',</p>
<p class="p1"><span class="Apple-converted-space">          </span>alignItems: 'center',</p>
<p class="p1"><span class="Apple-converted-space">          </span>paddingTop: '20px'</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>children: renderContent()</p>
<p class="p1"><span class="Apple-converted-space">      </span>}), jsx(Taskbar, {</p>
<p class="p1"><span class="Apple-converted-space">        </span>onStartButtonClick: toggleStartMenu,</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentWindowTitle: currentTaskbarTitle,</p>
<p class="p1"><span class="Apple-converted-space">      </span>})]</p>
<p class="p1"><span class="Apple-converted-space">    </span>}), jsx("div", {</p>
<p class="p1"><span class="Apple-converted-space">      </span>ref: startMenuRef,</p>
<p class="p1"><span class="Apple-converted-space">      </span>children: jsx(StartMenu, {</p>
<p class="p1"><span class="Apple-converted-space">        </span>isOpen: isStartMenuOpen,</p>
<p class="p1"><span class="Apple-converted-space">        </span>onNavigate: handleNavigation,</p>
<p class="p1"><span class="Apple-converted-space">        </span>closeMenu: () =&gt; setIsStartMenuOpen(false),</p>
<p class="p1"><span class="Apple-converted-space">        </span>isGameActive: isGameActive</p>
<p class="p1"><span class="Apple-converted-space">      </span>})</p>
<p class="p1"><span class="Apple-converted-space">    </span>}), tooltip.visible &amp;&amp; jsx(FlavorTextTooltip, { text: tooltip.text, x: tooltip.x, y: tooltip.y })</p>
<p class="p1"><span class="Apple-converted-space">    </span>]</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const container = document.getElementById('root');</p>
<p class="p1">if (container) {</p>
<p class="p1"><span class="Apple-converted-space">  </span>createRoot(container).render(jsx(App, {}));</p>
<p class="p1">} else {</p>
<p class="p1"><span class="Apple-converted-space">  </span>console.error('Failed to find the root element');</p>
<p class="p1">}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
