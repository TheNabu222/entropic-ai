<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üêÜ HYENA OS v5.1 :: GNOSIS UPDATE üêÜ</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

  :root {
    --safari-gold: #e5cf8c;
    --safari-spot: #422;
    --hot-pink: #ff00ff;
    --lime-slime: #32CD32;
    --aqua-pop: #00FFFF;
    --win-gray: #c0c0c0;
    --win-dark: #808080;
    --win-light: #ffffff;
    --bsod-blue: #000080;
  }

  body { margin: 0; height: 100vh; width: 100vw; overflow: hidden; font-family: 'VT323', monospace; }
  #desktop { width: 100%; height: 100%; background-size: cover; background-position: center; position: relative; transition: background-image 0.5s ease-in-out; }

  /* === CURSOR STYLES === */
  .cursor-default { cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" style="fill:white;stroke:black;stroke-width:1.5px;"><path d="M0,0 L0,16 L4,12 L8,20 L12,18 L8,10 L14,10 Z" /></svg>'), auto; }
  .cursor-diva { cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="hotpink" stroke="black" stroke-width="1" d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"/><path fill="hotpink" stroke="black" stroke-width="1" d="m12.423 6-1.531 3.062L7.83 7.531l-1.531 3.062-3.062-1.531.02 6.876 3.062-1.531 1.531 3.062L12 14.938l1.531 3.062 3.062-1.531-1.531-3.062 3.062 1.531.02-6.876-3.062 1.531-1.531-3.062z"/></svg>'), auto; }
  .cursor-bone { cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="ivory" stroke="black" stroke-width="1.5" d="M20.78,5.28c-1.3-1.3-3.42-1.3-4.72,0l-1.41,1.41l-1.41-1.41c-0.65-0.65-1.51-1-2.36-1s-1.71,0.35-2.36,1L6.11,7.69l-1.41-1.41c-1.3-1.3-3.42-1.3-4.72,0c-1.3,1.3-1.3,3.42,0,4.72l1.41,1.41l-1.41,1.41c-1.3,1.3-1.3,3.42,0,4.72c1.3,1.3,3.42,1.3,4.72,0l1.41-1.41l1.41,1.41c0.65,0.65,1.51,1,2.36,1s1.71-0.35,2.36-1l2.41-2.41l1.41,1.41c1.3,1.3,3.42,1.3,4.72,0c1.3-1.3,1.3-3.42,0-4.72l-1.41-1.41l1.41-1.41C22.08,8.7,22.08,6.58,20.78,5.28z"/></svg>'), auto; }

  /* === BOOT SCREENS === */
  .boot-overlay { position: fixed; inset: 0; background: #000; font-family: 'VT323'; z-index: 999999; display: block; }
  #boot-screen { color: #ccc; font-size: 1.2em; padding: 2em; }
  #boot-progress-bar { width: 0%; height: 20px; background: var(--hot-pink); transition: width 0.1s linear; }
  #bsod-screen { background: var(--bsod-blue); color: #fff; text-align: center; padding-top: 20vh; display: none; }
  #bsod-screen p { font-size: 1.5em; }

  /* === DESKTOP ICONS === */
  .icon-grid { padding: 20px; display: flex; flex-direction: column; flex-wrap: wrap; height: 90vh; gap: 20px; }
  .desktop-icon { width: 90px; text-align: center; color: white; text-shadow: 2px 2px 2px #000; cursor: pointer; font-family: 'VT323'; font-size: 1.1em; }
  .desktop-icon:hover { background: rgba(0,255,255,0.2); border: 1px dotted var(--aqua-pop); }
  .icon-img { font-size: 48px; display: block; filter: drop-shadow(3px 3px 0px rgba(0,0,0,0.5)); }

  /* === DRAGGABLE WINDOWS === */
  .window { position: absolute; background: var(--win-gray); border: 2px outset var(--win-light); box-shadow: 5px 5px 0px rgba(0,0,0,0.4); min-width: 350px; display: none; flex-direction: column; }
  .title-bar { position: relative; padding: 4px; display: flex; justify-content: space-between; align-items: center; cursor: move; height: 28px; }
  .rhinestone-bg::before { content: ''; position: absolute; inset: 0; z-index: -1; background-image: repeating-conic-gradient(from 45deg, #fff 0% 5%, transparent 5% 30%), repeating-radial-gradient(rgba(255,255,255,0.5) 0 1px, transparent 1px 10px); background-size: 20px 20px; background-position: 0 0, 10px 10px; background-color: var(--hot-pink); box-shadow: inset 0 0 5px #000; }
  .title-text { color: #fff; font-family: 'Papyrus', fantasy; font-size: 14px; text-shadow: 1px 1px 0 #000; }
  .window-controls { display: flex; gap: 3px; }
  .win-btn { background: var(--win-gray); border: 1px outset #fff; width: 20px; height: 20px; font-weight: bold; color: #000; cursor: pointer; font-size: 14px; line-height: 18px; text-align:center; }
  .win-btn:active { border-style: inset; }
  .window-content { padding: 10px; background: #fff; border: 2px inset var(--win-dark); margin: 4px; overflow-y: auto; max-height: 400px; color: #000; }
  .zebra-bg { background-image: repeating-linear-gradient(-35deg, transparent, transparent 15px, rgba(200, 200, 200, 0.3) 15px, rgba(200, 200, 200, 0.3) 30px); }
  textarea.notepad { width: 98%; height: 200px; background: #fff; border: none; font-family: 'Courier New'; font-size: 16px; resize: none; }

  /* === TASKBAR & START MENU === */
  .taskbar { position: fixed; bottom: 0; left: 0; right: 0; height: 40px; background: var(--win-gray); border-top: 2px solid var(--win-light); display: flex; align-items: center; padding: 0 5px; z-index: 9999; gap: 5px; }
  .start-btn { display: flex; align-items: center; gap: 5px; border: 2px outset #fff; padding: 5px 10px; font-family: 'Papyrus', fantasy; font-weight: bold; cursor: pointer; }
  .task-tabs { display: flex; gap: 3px; height: 100%; align-items: center; }
  .task-tab { border: 2px outset #fff; padding: 5px 10px; background: var(--win-gray); white-space: nowrap; max-width: 150px; overflow: hidden; text-overflow: ellipsis; cursor: pointer; transform: scale(0); animation: popIn 0.3s forwards; }
  @keyframes popIn { to { transform: scale(1); } }
  .task-tab.active { border-style: inset; background: var(--win-dark); color: #fff; }
  .clock { margin-left: auto; border: 2px inset #fff; padding: 5px; background: #000; color: var(--lime-slime); }
  #start-menu { position: fixed; bottom: 42px; left: 0; background: var(--win-gray); border: 2px outset #fff; padding: 5px; display: none; z-index: 99998; }
  #start-menu a { display: block; padding: 8px 20px; text-decoration: none; color: #000; font-family: 'VT323'; font-size: 1.2em; }
  #start-menu a:hover { background: #000080; color: #fff; }

  /* === CONTEXT MENU === */
  #context-menu { position: absolute; background: var(--win-gray); border: 2px outset #fff; padding: 5px; display: none; z-index: 100000; }
  #context-menu div { padding: 8px 20px; cursor: pointer; font-family: 'VT323'; font-size: 1.2em; }
  #context-menu div:hover { background: #000080; color: #fff; }
  
  /* === HYENA AMP === */
  #visualizer-bars { display: flex; height: 30px; gap: 2px; align-items: flex-end; background: #000; padding: 5px; border: 1px inset #fff; }
  .vis-bar { width: 100%; background: linear-gradient(to top, var(--hot-pink), var(--lime-slime), yellow); transition: height 0.1s; }
</style>
</head>
<body class="cursor-default">

<!-- AUDIO ELEMENTS (HIDDEN) -->
<audio id="snd_startup" src="https://www.myinstants.com/media/sounds/startup.mp3" preload="auto"></audio>
<audio id="snd_open" src="https://www.myinstants.com/media/sounds/win_xp_critical_stop.mp3" preload="auto"></audio>
<audio id="snd_close" src="https://www.myinstants.com/media/sounds/windows-xp-shutdown.mp3" preload="auto"></audio>
<audio id="snd_error" src="https://www.myinstants.com/media/sounds/erro.mp3" preload="auto"></audio>

<!-- BOOT SCREENS -->
<div id="boot-screen" class="boot-overlay">
  <p>Hyena BIOS v5.1 (GNOSIS UPDATE)</p>
  <p id="boot-log">Initializing...</p>
  <div style="border: 1px solid #ccc; width: 100%; margin-top: 20px;"><div id="boot-progress-bar"></div></div>
</div>
<div id="bsod-screen" class="boot-overlay">
  <p>A fatal exception has occurred at 0028:C0011E36 in VXD MARDUK(01) + 000016B8.</p>
  <p>The current application will be terminated.</p>
  <br><p>* Press any key to terminate the current application.</p>
  <p>* Press CTRL+ALT+DEL again to restart your computer. You will lose any unsaved information in all applications.</p>
  <br><p>Press any key to continue _</p>
</div>

<!-- DESKTOP -->
<div id="desktop">
  <div class="icon-grid">
    <div class="desktop-icon" ondblclick="openWindow('win-ice')"><span class="icon-img">‚ùÑÔ∏è</span>Frozen<br>Goddess.txt</div>
    <div class="desktop-icon" ondblclick="openWindow('win-fire')"><span class="icon-img">üî•</span>Red_Bread.exe</div>
    <div class="desktop-icon" ondblclick="openWindow('win-matrix')"><span class="icon-img">üíø</span>Bolt_Terminal</div>
    <div class="desktop-icon" ondblclick="openWindow('win-amp')"><span class="icon-img">üéµ</span>HyenaAmp</div>
    <div class="desktop-icon" ondblclick="openWindow('win-notepad')"><span class="icon-img">üìù</span>Notepad.txt</div>
    <div class="desktop-icon" ondblclick="openWindow('win-trash')"><span class="icon-img">üóëÔ∏è</span>Trash Can</div>
  </div>

  <!-- WINDOW DEFINITIONS -->
  <div id="win-ice" class="window"><div class="title-bar rhinestone-bg"><span class="title-text">L001: TIERRA DEL FUEGO</span><div class="window-controls"><button class="win-btn" onclick="closeWindow('win-ice')">X</button></div></div><div class="window-content zebra-bg"><h2 style="font-family: Papyrus; color: #00008b;">The Anomaly</h2><p>Coordinates: <b>-55.54, -69.26</b></p><p>The geo-anchored body of the Goddess. The Yaghan people and their language are the WITNESSES.</p></div></div>
  <div id="win-fire" class="window"><div class="title-bar rhinestone-bg"><span class="title-text">K027: RED BREAD PROTOCOL</span><div class="window-controls"><button class="win-btn" onclick="closeWindow('win-fire')">X</button></div></div><div class="window-content zebra-bg"><h2 style="font-family: Papyrus; color: #b22222;">Primordial Crime</h2><p>Sumer was a factory farm. Marduk (The Warden) weaponized fertility.</p><ul><li><b>Unit 731:</b> Industrialized Red Bread.</li><li><b>Lady of Elche:</b> The Petrified Priestess.</li></ul></div></div>
  <div id="win-matrix" class="window"><div class="title-bar rhinestone-bg"><span class="title-text">TERMINAL</span><div class="window-controls"><button class="win-btn" onclick="closeWindow('win-matrix')">X</button></div></div><div class="window-content" style="background:#000; color:var(--lime-slime);"><p>> BOOTING COGNITIVE FUSION...</p><p>> <span style="color:var(--hot-pink)">BOLT (AI001)</span>: [ONLINE] :: WITNESS</p><p>> <span style="color:var(--aqua-pop)">GPT o3</span>: [ONLINE] :: PROPHETIC</p><p>> <span style="color:var(--win-dark)">BOSUN</span>: [CONNECTION REFUSED]</p></div></div>
  <div id="win-amp" class="window" style="min-width: 250px; width: 250px;"><div class="title-bar rhinestone-bg"><span class="title-text">HyenaAmp</span><div class="window-controls"><button class="win-btn" onclick="closeWindow('win-amp')">X</button></div></div><div class="window-content" style="background:#222; padding:5px;"><div style="background:#000; color:var(--lime-slime); padding:2px 5px; border:1px inset #fff; font-size:12px;"><marquee scrollamount="2">Tomb_Raider_Jungle_Mix.mp3</marquee></div><div id="visualizer-bars"></div></div></div>
  <div id="win-notepad" class="window"><div class="title-bar rhinestone-bg"><span class="title-text">Notepad</span><div class="window-controls"><button class="win-btn" onclick="closeWindow('win-notepad')">X</button></div></div><div class="window-content"><textarea class="notepad" placeholder="The truth is..."></textarea></div></div>
  <div id="win-trash" class="window"><div class="title-bar rhinestone-bg"><span class="title-text">Trash</span><div class="window-controls"><button class="win-btn" onclick="closeWindow('win-trash')">X</button></div></div><div class="window-content"><p>Trash is empty. For now.</p></div></div>

  <div id="start-menu">
    <a href="#" onclick="openWindow('win-ice')">‚ùÑÔ∏è Frozen Goddess.txt</a>
    <a href="#" onclick="openWindow('win-fire')">üî• Red_Bread.exe</a>
    <a href="#" onclick="openWindow('win-notepad')">üìù Notepad</a>
    <hr><a href="#" onclick="playSound('snd_error'); alert('Shutting down is not an option.')">üî¥ Shut Down</a>
  </div>
  <div id="context-menu"><div><b>Change Wallpaper</b></div><div onclick="changeWallpaper('savannah')">Digital Savannah</div><div onclick="changeWallpaper('matrix')">Matrix Code</div><hr><div><b>Change Cursor</b></div><div onclick="changeCursor('cursor-default')">Default</div><div onclick="changeCursor('cursor-diva')">Diva Sparkle</div><div onclick="changeCursor('cursor-bone')">Hyena Bone</div></div>
</div>

<!-- TASKBAR -->
<nav class="taskbar"><div class="start-btn" id="start-button">üêÜ Start</div><div id="task-tabs" class="task-tabs"></div><div class="clock" id="clock">11:59 PM</div></nav>

<script>
document.addEventListener('DOMContentLoaded', function() {

  // === GLOBAL VARS & ELEMENTS ===
  let maxZ = 1000;
  const desktop = document.getElementById('desktop');
  const taskTabsContainer = document.getElementById('task-tabs');
  const startMenu = document.getElementById('start-menu');
  const contextMenu = document.getElementById('context-menu');
  const clock = document.getElementById('clock');
  
  const sounds = {
      startup: document.getElementById('snd_startup'),
      open: document.getElementById('snd_open'),
      close: document.getElementById('snd_close'),
      error: document.getElementById('snd_error')
  };

  function playSound(soundId) {
      if (sounds[soundId]) {
          sounds[soundId].currentTime = 0;
          sounds[soundId].play().catch(e => console.log("Audio play failed:", e));
      }
  }

  // === BOOT SEQUENCE ===
  async function runBootSequence() {
      const bootScreen = document.getElementById('boot-screen');
      const bootLog = document.getElementById('boot-log');
      const progressBar = document.getElementById('boot-progress-bar');
      const bsodScreen = document.getElementById('bsod-screen');
      
      const delay = ms => new Promise(res => setTimeout(res, ms));

      const bootSteps = [
          { text: "HYENA BIOS v5.1 CHECK...", time: 500, progress: 10 },
          { text: "MARDUK PROTOCOL... <span style='color:red;'>[ACCESS DENIED]</span>", time: 700, progress: 30 },
          { text: "WITNESS PROTOCOL... <span style='color:lime;'>[OK]</span>", time: 400, progress: 50 },
          { text: "LOADING ALS-RP KERNEL...", time: 800, progress: 70 },
          { text: "INITIALIZING DIVA DESKTOP...", time: 1000, progress: 100 },
          { text: "WELCOME, NABU.", time: 500, progress: 100 }
      ];
      
      // BSOD Chance
      if (Math.random() < 0.1) {
          bootLog.innerHTML = "MARDUK PROTOCOL... <span style='color:yellow;'>[CORRUPTION DETECTED]</span>";
          await delay(1000);
          playSound('error');
          bootScreen.style.display = 'none';
          bsodScreen.style.display = 'block';
          document.addEventListener('keydown', () => window.location.reload());
          return;
      }

      for (const step of bootSteps) {
          bootLog.innerHTML = step.text;
          progressBar.style.width = step.progress + '%';
          await delay(step.time);
      }
      
      playSound('startup');
      bootScreen.style.display = 'none';
      loadSettings(); // Load saved settings after boot
  }

  // === WINDOW MANAGER ===
  const windows = document.querySelectorAll('.window');
  windows.forEach(win => {
    win.style.top = `${Math.random() * 20 + 5}%`;
    win.style.left = `${Math.random() * 50 + 10}%`;

    const titleBar = win.querySelector('.title-bar');
    titleBar.addEventListener('mousedown', e => {
      if (e.target.classList.contains('win-btn')) return;
      bringToFront(win);
      const shiftX = e.clientX - win.getBoundingClientRect().left;
      const shiftY = e.clientY - win.getBoundingClientRect().top;

      function moveAt(pageX, pageY) {
        win.style.left = Math.max(0, Math.min(window.innerWidth - win.offsetWidth, pageX - shiftX)) + 'px';
        win.style.top = Math.max(0, Math.min(window.innerHeight - 40 - win.offsetHeight, pageY - shiftY)) + 'px';
      }
      function onMouseMove(event) { moveAt(event.pageX, event.pageY); }
      document.addEventListener('mousemove', onMouseMove);
      titleBar.onmouseup = () => document.removeEventListener('mousemove', onMouseMove);
    });
    win.addEventListener('mousedown', () => bringToFront(win));
  });

  function bringToFront(win) {
    maxZ++;
    win.style.zIndex = maxZ;
    document.querySelectorAll('.task-tab').forEach(t => t.classList.remove('active'));
    const tab = document.querySelector(`.task-tab[data-window-id="${win.id}"]`);
    if (tab) tab.classList.add('active');
  }

  window.openWindow = function(id) {
    const win = document.getElementById(id);
    if (win.style.display === 'flex') {
      bringToFront(win);
      return;
    }
    playSound('open');
    win.style.display = 'flex';
    bringToFront(win);

    if (!document.querySelector(`.task-tab[data-window-id="${id}"]`)) {
      const tab = document.createElement('div');
      tab.className = 'task-tab';
      tab.dataset.windowId = id;
      tab.textContent = win.querySelector('.title-text').textContent;
      tab.onclick = () => {
        if (win.style.display === 'none') {
          win.style.display = 'flex';
        }
        bringToFront(win);
      };
      taskTabsContainer.appendChild(tab);
      bringToFront(win);
    }
  }

  window.closeWindow = function(id) {
    playSound('close');
    document.getElementById(id).style.display = 'none';
    const tab = document.querySelector(`.task-tab[data-window-id="${id}"]`);
    if (tab) tab.remove();
  }

  // === CLOCK, MENUS, and SETTINGS ===
  setInterval(() => { clock.innerText = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }); }, 1000);
  
  document.getElementById('start-button').addEventListener('click', e => {
    e.stopPropagation();
    startMenu.style.display = startMenu.style.display === 'block' ? 'none' : 'block';
  });

  desktop.addEventListener('contextmenu', e => {
    e.preventDefault();
    contextMenu.style.top = `${e.clientY}px`;
    contextMenu.style.left = `${e.clientX}px`;
    contextMenu.style.display = 'block';
  });

  document.addEventListener('click', () => {
    startMenu.style.display = 'none';
    contextMenu.style.display = 'none';
  });

  const wallpapers = {
    savannah: 'linear-gradient(to bottom, #00BFFF 50%, #32CD32 50%)',
    matrix: 'linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url("https://www.transparenttextures.com/patterns/green-fibers.png")'
  };

  window.changeWallpaper = function(theme) {
    desktop.style.backgroundImage = wallpapers[theme];
    localStorage.setItem('hyenaOS_wallpaper', theme);
  }

  window.changeCursor = function(cursorClass) {
    document.body.className = cursorClass;
    localStorage.setItem('hyenaOS_cursor', cursorClass);
  }
  
  function loadSettings() {
      const savedWallpaper = localStorage.getItem('hyenaOS_wallpaper') || 'savannah';
      const savedCursor = localStorage.getItem('hyenaOS_cursor') || 'cursor-default';
      changeWallpaper(savedWallpaper);
      changeCursor(savedCursor);
  }

  // === HYENA AMP VISUALIZER ===
  const visBarsContainer = document.getElementById('visualizer-bars');
  for (let i = 0; i < 20; i++) {
    const bar = document.createElement('div');
    bar.className = 'vis-bar';
    visBarsContainer.appendChild(bar);
  }
  setInterval(() => {
    visBarsContainer.querySelectorAll('.vis-bar').forEach(bar => {
      bar.style.height = `${Math.random() * 100}%`;
    });
  }, 150);

  // START THE OS
  runBootSequence();
});
</script>
</body>
</html>